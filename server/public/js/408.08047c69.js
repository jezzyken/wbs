"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[408],{8408:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var a=s(6103),i=s(7314),r=s(1484),n=s(2938),o=s(4414),l=s(3449),c=s(3064),d=s(1289),u=s(174),p=s(6930),h=s(2756),m=s(2197),x=s(7150),f=s(1034),v=s(7112),g=s(6513),b=function(){var e=this,t=e._self._c;return t(l.A,{staticClass:"px-6"},[t("div",{staticClass:"mb-6"},[t(a.A,{staticClass:"pa-0",attrs:{items:e.breadcrumbs,divider:"/"}})],1),t(r.A,{staticClass:"mb-6"},[t(n.OQ,[t(h.A,[t(o.A,{attrs:{cols:"12",sm:"6",md:"4"}},[t(v.A,{attrs:{label:"Search",placeholder:"Description / Type",dense:"",outlined:"","hide-details":"","prepend-inner-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t(f.A)],1)],1)],1),t(r.A,[t(n.ri,{staticClass:"d-flex justify-space-between py-4"},[t("span",{staticClass:"text-h6"},[e._v("Expenses List")]),t("div",[t(i.A,{attrs:{color:"primary"},on:{click:e.openAddDialog}},[t(p.A,{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Add Expense ")],1)],1)]),t(c.A,{attrs:{headers:e.headers,items:e.filteredExpenses,loading:e.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[10,20,50],"show-first-last-page":!0}},scopedSlots:e._u([{key:"item.amount",fn:function({item:t}){return[e._v(" ₱"+e._s(t.amount.toFixed(2))+" ")]}},{key:"item.date",fn:function({item:t}){return[e._v(" "+e._s(e.formatDate(t.date))+" ")]}},{key:"item.actions",fn:function({item:s}){return[t(i.A,{staticClass:"mr-2",attrs:{"x-small":"",text:"",color:"primary"},on:{click:function(t){return e.editExpense(s)}}},[t(p.A,{attrs:{"x-small":"",left:""}},[e._v("mdi-pencil")]),e._v(" Edit ")],1),t(i.A,{attrs:{"x-small":"",text:"",color:"error"},on:{click:function(t){return e.deleteExpense(s)}}},[t(p.A,{attrs:{"x-small":"",left:""}},[e._v("mdi-delete")]),e._v(" Delete ")],1)]}}])})],1),t(d.A,{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r.A,[t(n.ri,[t("span",{staticClass:"text-h5"},[e._v(e._s(e.isEdit?"Edit Expense":"Add Expense"))])]),t(n.OQ,[e.dialog?t(u.A,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(h.A,[t(o.A,{attrs:{cols:"12",sm:"6"}},[t(v.A,{attrs:{label:"Date",type:"date",required:"",rules:e.requiredRules},model:{value:e.editedItem.date,callback:function(t){e.$set(e.editedItem,"date",t)},expression:"editedItem.date"}})],1),t(o.A,{attrs:{cols:"12",sm:"6"}},[t(v.A,{attrs:{label:"Amount",type:"number",prefix:"₱",required:"",rules:e.amountRules},model:{value:e.editedItem.amount,callback:function(t){e.$set(e.editedItem,"amount",e._n(t))},expression:"editedItem.amount"}})],1),t(o.A,{attrs:{cols:"12",sm:"12"}},[t(m.A,{attrs:{items:e.expenseTypes,label:"Expense Type",required:"",rules:e.requiredRules},model:{value:e.editedItem.expenseType,callback:function(t){e.$set(e.editedItem,"expenseType",t)},expression:"editedItem.expenseType"}})],1),t(o.A,{attrs:{cols:"12"}},[t(g.A,{attrs:{label:"Description",required:"",rules:e.requiredRules},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1):e._e()],1),t(n.SL,[t(f.A),t(i.A,{attrs:{text:"",disabled:e.isSaving},on:{click:e.closeDialog}},[e._v("Cancel")]),t(i.A,{attrs:{color:"primary",disabled:!e.valid||e.isSaving,loading:e.isSaving},on:{click:e.saveExpense}},[e._v(" Save ")])],1)],1)],1),t(d.A,{attrs:{"max-width":"400px"},model:{value:e.confirmDialog,callback:function(t){e.confirmDialog=t},expression:"confirmDialog"}},[t(r.A,[t(n.ri,{staticClass:"text-h5"},[e._v("Confirm Delete")]),t(n.OQ,[e._v("Are you sure you want to delete this expense?")]),t(n.SL,[t(f.A),t(i.A,{attrs:{text:""},on:{click:function(t){e.confirmDialog=!1}}},[e._v("Cancel")]),t(i.A,{attrs:{color:"error",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),t(x.A,{attrs:{color:e.snackbarColor,timeout:"3000"},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(i.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},A=[],k=(s(8111),s(2489),s(5353)),y=s(5093),D=s.n(y),E={name:"ExpensesPage",data:()=>({breadcrumbs:[{text:"Home",disabled:!1,href:"/"},{text:"Expenses",disabled:!0}],search:"",dialog:!1,confirmDialog:!1,dateMenu:!1,valid:!1,isEdit:!1,snackbar:!1,snackbarText:"",snackbarColor:"",isSaving:!1,itemToDelete:null,headers:[{text:"Date",value:"date",sortable:!0},{text:"Amount",value:"amount",sortable:!0},{text:"Type",value:"expenseType",sortable:!0},{text:"Description",value:"description",sortable:!0},{text:"Actions",value:"actions",sortable:!1}],expenseTypes:["Utilities","Supplies","Maintenance","Other"],editedItem:{date:D()().format("YYYY-MM-DD"),amount:0,expenseType:"",description:""},defaultItem:{date:D()().format("YYYY-MM-DD"),amount:0,expenseType:"",description:""},requiredRules:[e=>!!e||"This field is required"],amountRules:[e=>!!e||"Amount is required",e=>e>0||"Amount must be greater than 0"]}),computed:{...(0,k.aH)("expenses",["expenses","loading","error"]),filteredExpenses(){return this.expenses.filter((e=>{const t=this.search.toLowerCase();return!this.search||e.description.toLowerCase().includes(t)||e.expenseType.toLowerCase().includes(t)}))}},async created(){await this.fetchExpenses()},methods:{...(0,k.i0)("expenses",["fetchExpenses","createExpense","updateExpense","deleteExpense"]),formatDate(e){return e?D()(e).format("MMM DD, YYYY"):""},openAddDialog(){this.isEdit=!1,this.editedItem={...this.defaultItem},this.dialog=!0},editExpense(e){this.isEdit=!0,this.editedItem={...e,date:D()(e.date).format("YYYY-MM-DD")},this.dialog=!0},closeDialog(){this.dialog=!1,this.$nextTick((()=>{this.$refs.form&&(this.$refs.form.resetValidation(),this.$refs.form.reset()),this.editedItem={...this.defaultItem}}))},async saveExpense(){if(this.$refs.form.validate()){this.isSaving=!0;try{const e={...this.editedItem,date:D()(this.editedItem.date).format("YYYY-MM-DD")};this.isEdit?(await this.updateExpense({id:this.editedItem._id,expense:e}),this.snackbarText="Expense updated successfully"):(await this.createExpense(e),this.snackbarText="Expense created successfully"),this.snackbarColor="success",this.closeDialog(),await this.fetchExpenses()}catch(e){this.snackbarText=e.message||"Error saving expense",this.snackbarColor="error"}finally{this.isSaving=!1,this.snackbar=!0}}},deleteExpense(e){this.itemToDelete=e,this.confirmDialog=!0},async confirmDelete(){try{await this.deleteExpense(this.itemToDelete._id),this.snackbarText="Expense deleted successfully",this.snackbarColor="success",await this.fetchExpenses()}catch(e){this.snackbarText=e.message||"Error deleting expense",this.snackbarColor="error"}finally{this.confirmDialog=!1,this.itemToDelete=null,this.snackbar=!0}}}},w=E,I=s(1656),_=(0,I.A)(w,b,A,!1,null,"36267333",null),T=_.exports},6513:function(e,t,s){s.d(t,{A:function(){return n}});var a=s(7112),i=s(5803);const r=(0,i.A)(a.A);var n=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...a.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(s,t)+"px"},genInput(){const e=a.A.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){a.A.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})}}]);
//# sourceMappingURL=408.08047c69.js.map