{"version":3,"file":"js/482.51d5c05e.js","mappings":"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","sources":["webpack://client/./src/views/admin/ConsumerRecords.vue","webpack://client/src/views/admin/ConsumerRecords.vue","webpack://client/./src/views/admin/ConsumerRecords.vue?a798","webpack://client/./src/views/admin/ConsumerRecords.vue?a82c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{staticClass:\"px-6\"},[_c('div',{staticClass:\"mb-6\"},[_c('v-breadcrumbs',{staticClass:\"pa-0\",attrs:{\"items\":_vm.breadcrumbs,\"divider\":\"/\"}})],1),_c('v-card',{staticClass:\"mb-6\"},[_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('v-text-field',{attrs:{\"label\":\"Search\",\"placeholder\":\"Account No. / Name\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"prepend-inner-icon\":\"mdi-magnify\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('v-select',{attrs:{\"items\":_vm.statusItems,\"label\":\"Status\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.statusFilter),callback:function ($$v) {_vm.statusFilter=$$v},expression:\"statusFilter\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('v-select',{attrs:{\"items\":_vm.puroks,\"label\":\"Purok\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.purokFilter),callback:function ($$v) {_vm.purokFilter=$$v},expression:\"purokFilter\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('v-select',{attrs:{\"items\":_vm.archiveItems,\"label\":\"Archive Status\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\"},model:{value:(_vm.archiveFilter),callback:function ($$v) {_vm.archiveFilter=$$v},expression:\"archiveFilter\"}})],1)],1),_c('v-row',{staticClass:\"mt-4\"},[_c('v-spacer'),_c('v-btn',{staticClass:\"mr-2\",attrs:{\"text\":\"\"},on:{\"click\":_vm.resetFilters}},[_vm._v(\"Reset\")])],1)],1)],1),_c('v-card',[_c('v-card-title',{staticClass:\"d-flex justify-space-between py-4\"},[_c('span',{staticClass:\"text-h6\"},[_vm._v(\"Consumer List\")]),_c('div',[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"text\":\"\"},on:{\"click\":_vm.exportData}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-download\")]),_vm._v(\" Export \")],1),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.openAddDialog}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-plus\")]),_vm._v(\" Add Consumer \")],1)],1)]),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.filteredConsumers,\"loading\":_vm.loading,\"items-per-page\":10,\"footer-props\":{\n        'items-per-page-options': [10, 20, 50],\n        'show-first-last-page': true,\n      }},scopedSlots:_vm._u([{key:\"item.status\",fn:function({ item }){return [_c('v-chip',{attrs:{\"color\":_vm.getStatusColor(item.status),\"small\":\"\",\"label\":\"\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(item.status)+\" \")])]}},{key:\"item.actions\",fn:function({ item }){return [_c('v-btn',{staticClass:\"mr-2\",attrs:{\"x-small\":\"\",\"text\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.editConsumer(item)}}},[_c('v-icon',{attrs:{\"x-small\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-pencil\")]),_vm._v(\" Edit \")],1),(_vm.userRole === 'admin')?_c('v-btn',{attrs:{\"x-small\":\"\",\"text\":\"\",\"color\":item.isArchived ? 'success' : 'error'},on:{\"click\":function($event){return _vm.toggleArchive(item)}}},[_c('v-icon',{attrs:{\"x-small\":\"\",\"left\":\"\"}},[_vm._v(\" \"+_vm._s(item.isArchived ? \"mdi-archive-restore\" : \"mdi-archive\")+\" \")]),_vm._v(\" \"+_vm._s(item.isArchived ? \"Restore\" : \"Archive\")+\" \")],1):_vm._e()]}}])})],1),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"text-h5\"},[_vm._v(_vm._s(_vm.isEdit ? \"Edit Consumer\" : \"Add Consumer\"))])]),_c('v-card-text',[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-row',[(!_vm.isEdit)?_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"12\"}},[_c('v-select',{staticClass:\"mt-4\",attrs:{\"items\":_vm.consumerTypes,\"label\":\"Consumer Type\",\"required\":\"\"},model:{value:(_vm.editedItem.consumerType),callback:function ($$v) {_vm.$set(_vm.editedItem, \"consumerType\", $$v)},expression:\"editedItem.consumerType\"}})],1):_vm._e(),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Account No.\",\"disabled\":_vm.isEdit,\"required\":\"\"},model:{value:(_vm.editedItem.accountNo),callback:function ($$v) {_vm.$set(_vm.editedItem, \"accountNo\", $$v)},expression:\"editedItem.accountNo\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.statusItems.filter((s) => s !== 'All'),\"label\":\"Status\",\"required\":\"\"},model:{value:(_vm.editedItem.status),callback:function ($$v) {_vm.$set(_vm.editedItem, \"status\", $$v)},expression:\"editedItem.status\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"First Name\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.editedItem.firstName),callback:function ($$v) {_vm.$set(_vm.editedItem, \"firstName\", $$v)},expression:\"editedItem.firstName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Middle Name\"},model:{value:(_vm.editedItem.middleName),callback:function ($$v) {_vm.$set(_vm.editedItem, \"middleName\", $$v)},expression:\"editedItem.middleName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Last Name\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.editedItem.lastName),callback:function ($$v) {_vm.$set(_vm.editedItem, \"lastName\", $$v)},expression:\"editedItem.lastName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Name Extension (e.g. Jr., Sr.)\"},model:{value:(_vm.editedItem.nameExtension),callback:function ($$v) {_vm.$set(_vm.editedItem, \"nameExtension\", $$v)},expression:\"editedItem.nameExtension\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Full Address\"},model:{value:(_vm.editedItem.fullAddress),callback:function ($$v) {_vm.$set(_vm.editedItem, \"fullAddress\", $$v)},expression:\"editedItem.fullAddress\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.puroks.filter((p) => p !== 'All'),\"label\":\"Purok\",\"required\":\"\"},model:{value:(_vm.editedItem.purok),callback:function ($$v) {_vm.$set(_vm.editedItem, \"purok\", $$v)},expression:\"editedItem.purok\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Contact Number\",\"rules\":_vm.phoneRules},model:{value:(_vm.editedItem.contactNumber),callback:function ($$v) {_vm.$set(_vm.editedItem, \"contactNumber\", $$v)},expression:\"editedItem.contactNumber\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Email\",\"rules\":_vm.emailRules},model:{value:(_vm.editedItem.email),callback:function ($$v) {_vm.$set(_vm.editedItem, \"email\", $$v)},expression:\"editedItem.email\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":_vm.isSaving},on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.valid || _vm.isSaving,\"loading\":_vm.isSaving},on:{\"click\":_vm.saveConsumer}},[_vm._v(\" \"+_vm._s(_vm.getActionButtonText)+\" \")])],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":\"3000\"},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\" Close \")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"px-6\">\n    <!-- Page Header -->\n    <div class=\"mb-6\">\n      <v-breadcrumbs\n        :items=\"breadcrumbs\"\n        divider=\"/\"\n        class=\"pa-0\"\n      ></v-breadcrumbs>\n    </div>\n\n    <!-- Filter Section -->\n    <v-card class=\"mb-6\">\n      <v-card-text>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\" md=\"3\">\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search\"\n              placeholder=\"Account No. / Name\"\n              dense\n              outlined\n              hide-details\n              prepend-inner-icon=\"mdi-magnify\"\n            ></v-text-field>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"3\">\n            <v-select\n              v-model=\"statusFilter\"\n              :items=\"statusItems\"\n              label=\"Status\"\n              dense\n              outlined\n              hide-details\n            ></v-select>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"3\">\n            <v-select\n              v-model=\"purokFilter\"\n              :items=\"puroks\"\n              label=\"Purok\"\n              dense\n              outlined\n              hide-details\n            ></v-select>\n          </v-col>\n          <v-col cols=\"12\" sm=\"6\" md=\"3\">\n            <v-select\n              v-model=\"archiveFilter\"\n              :items=\"archiveItems\"\n              label=\"Archive Status\"\n              dense\n              outlined\n              hide-details\n            ></v-select>\n          </v-col>\n        </v-row>\n        <v-row class=\"mt-4\">\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"resetFilters\" class=\"mr-2\">Reset</v-btn>\n          <!-- <v-btn color=\"primary\" @click=\"applyFilters\">Apply Filter</v-btn> -->\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <!-- Consumer Records -->\n    <v-card>\n      <v-card-title class=\"d-flex justify-space-between py-4\">\n        <span class=\"text-h6\">Consumer List</span>\n        <div>\n          <v-btn text class=\"mr-2\" @click=\"exportData\">\n            <v-icon left>mdi-download</v-icon>\n            Export\n          </v-btn>\n          <v-btn color=\"primary\" @click=\"openAddDialog\">\n            <v-icon left>mdi-plus</v-icon>\n            Add Consumer\n          </v-btn>\n        </div>\n      </v-card-title>\n\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"filteredConsumers\"\n        :loading=\"loading\"\n        :items-per-page=\"10\"\n        :footer-props=\"{\n          'items-per-page-options': [10, 20, 50],\n          'show-first-last-page': true,\n        }\"\n      >\n        <template v-slot:item.status=\"{ item }\">\n          <v-chip\n            :color=\"getStatusColor(item.status)\"\n            small\n            label\n            text-color=\"white\"\n          >\n            {{ item.status }}\n          </v-chip>\n        </template>\n\n        <template v-slot:item.actions=\"{ item }\">\n          <!-- <v-btn\n            small\n            text\n            color=\"primary\"\n            class=\"mr-2\"\n            @click=\"viewConsumer(item)\"\n          >\n            <v-icon small left>mdi-eye</v-icon>\n            View\n          </v-btn> -->\n          <v-btn\n            x-small\n            text\n            color=\"primary\"\n            class=\"mr-2\"\n            @click=\"editConsumer(item)\"\n          >\n            <v-icon x-small left>mdi-pencil</v-icon>\n            Edit\n          </v-btn>\n\n          <v-btn\n            v-if=\"userRole === 'admin'\"\n            x-small\n            text\n            :color=\"item.isArchived ? 'success' : 'error'\"\n            @click=\"toggleArchive(item)\"\n          >\n            <v-icon x-small left>\n              {{ item.isArchived ? \"mdi-archive-restore\" : \"mdi-archive\" }}\n            </v-icon>\n            {{ item.isArchived ? \"Restore\" : \"Archive\" }}\n          </v-btn>\n        </template>\n      </v-data-table>\n    </v-card>\n\n    <!-- Add/Edit Consumer Dialog -->\n    <v-dialog v-model=\"dialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">{{\n            isEdit ? \"Edit Consumer\" : \"Add Consumer\"\n          }}</span>\n        </v-card-title>\n        <v-card-text>\n          <v-form ref=\"form\" v-model=\"valid\">\n            <v-row>\n              <v-col cols=\"12\" sm=\"12\" v-if=\"!isEdit\">\n                <v-select\n                  class=\"mt-4\"\n                  v-model=\"editedItem.consumerType\"\n                  :items=\"consumerTypes\"\n                  label=\"Consumer Type\"\n                  required\n                ></v-select>\n              </v-col>\n\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.accountNo\"\n                  label=\"Account No.\"\n                  :disabled=\"isEdit\"\n                  required\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-select\n                  v-model=\"editedItem.status\"\n                  :items=\"statusItems.filter((s) => s !== 'All')\"\n                  label=\"Status\"\n                  required\n                ></v-select>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.firstName\"\n                  label=\"First Name\"\n                  required\n                  :rules=\"nameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.middleName\"\n                  label=\"Middle Name\"\n                ></v-text-field>\n              </v-col>\n\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.lastName\"\n                  label=\"Last Name\"\n                  required\n                  :rules=\"nameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.nameExtension\"\n                  label=\"Name Extension (e.g. Jr., Sr.)\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"editedItem.fullAddress\"\n                  label=\"Full Address\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-select\n                  v-model=\"editedItem.purok\"\n                  :items=\"puroks.filter((p) => p !== 'All')\"\n                  label=\"Purok\"\n                  required\n                ></v-select>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.contactNumber\"\n                  label=\"Contact Number\"\n                  :rules=\"phoneRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"editedItem.email\"\n                  label=\"Email\"\n                  :rules=\"emailRules\"\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-form>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"closeDialog\" :disabled=\"isSaving\">Cancel</v-btn>\n          <v-btn\n            color=\"primary\"\n            :disabled=\"!valid || isSaving\"\n            :loading=\"isSaving\"\n            @click=\"saveConsumer\"\n          >\n            {{ getActionButtonText }}\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Snackbar -->\n    <v-snackbar v-model=\"snackbar\" :color=\"snackbarColor\" timeout=\"3000\">\n      {{ snackbarText }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn text v-bind=\"attrs\" @click=\"snackbar = false\"> Close </v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  name: \"ConsumerRecordsPage\",\n\n  data: () => ({\n    breadcrumbs: [\n      { text: \"Home\", disabled: false, href: \"/\" },\n      { text: \"Consumer Records\", disabled: true },\n    ],\n    search: \"\",\n    statusFilter: \"All\",\n    purokFilter: \"All\",\n    archiveFilter: \"Active\",\n    dialog: false,\n    valid: false,\n    isEdit: false,\n    snackbar: false,\n    snackbarText: \"\",\n    snackbarColor: \"\",\n\n    headers: [\n      { text: \"Account No.\", value: \"accountNo\", sortable: true },\n      {\n        text: \"Name\",\n        value: \"fullName\",\n        sortable: true,\n        sort: (a, b) => a.fullName.localeCompare(b.fullName),\n      },\n      { text: \"Address\", value: \"fullAddress\", sortable: true },\n      { text: \"Purok/Zone\", value: \"purok\", sortable: true },\n      { text: \"Contact\", value: \"contactNumber\", sortable: true },\n      { text: \"Status\", value: \"status\", sortable: true },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n\n    statusItems: [\"All\", \"active\", \"inactive\", \"disconnected\", \"delinquent\"],\n    puroks: [\"All\", \"Purok 1\", \"Purok 2\", \"Purok 3\", \"Purok 4\", \"Purok 5\", \"Purok 6\", \"Purok 7\"],\n    archiveItems: [\"Active\", \"Archived\", \"All\"],\n\n    editedItem: {\n      accountNo: \"\",\n      firstName: \"\",\n      middleName: \"\",\n      lastName: \"\",\n      nameExtension: \"\",\n      fullAddress: \"\",\n      purok: \"\",\n      contactNumber: \"\",\n      email: \"\",\n      status: \"active\",\n      consumerType: \"Existing Consumer\",\n    },\n    defaultItem: {\n      accountNo: \"\",\n      firstName: \"\",\n      middleName: \"\",\n      lastName: \"\",\n      nameExtension: \"\",\n      fullAddress: \"\",\n      purok: \"\",\n      contactNumber: \"\",\n      email: \"\",\n      status: \"active\",\n      consumerType: \"Existing Consumer\",\n    },\n\n    nameRules: [\n      (v) => (v || \"\").length > 0 || \"Name is required\",\n      (v) => (v || \"\").length >= 2 || \"Name must be at least 2 characters\",\n    ],\n    phoneRules: [\n      (v) => !v || /^\\+?[\\d\\s-]{10,}$/.test(v) || \"Invalid phone number format\",\n    ],\n    emailRules: [(v) => !v || /.+@.+\\..+/.test(v) || \"Invalid email format\"],\n    isSaving: false,\n    consumerTypes: [\"New Consumer\", \"Existing Consumer\"],\n  }),\n\n  computed: {\n    ...mapState(\"consumers\", [\"consumers\", \"loading\", \"error\"]),\n\n    userRole() {\n      return this.$store.state.auth.user?.role;\n    },\n\n    getActionButtonText() {\n      if (this.isEdit) {\n        return \"Update\";\n      }\n      return this.editedItem.consumerType === \"New Consumer\"\n        ? \"Process Payment\"\n        : \"Save\";\n    },\n\n    filteredConsumers() {\n      return this.consumers.filter((consumer) => {\n        const searchLower = this.search.toLowerCase();\n        const searchMatch =\n          !this.search ||\n          consumer.accountNo.toLowerCase().includes(searchLower) ||\n          consumer.firstName.toLowerCase().includes(searchLower) ||\n          consumer.middleName?.toLowerCase().includes(searchLower) ||\n          consumer.lastName.toLowerCase().includes(searchLower) ||\n          consumer.nameExtension?.toLowerCase().includes(searchLower) ||\n          consumer.fullName.toLowerCase().includes(searchLower);\n\n        const statusMatch =\n          this.statusFilter === \"All\" || consumer.status === this.statusFilter;\n\n        const purokMatch =\n          this.purokFilter === \"All\" || consumer.purok === this.purokFilter;\n\n        const archiveMatch =\n          this.archiveFilter === \"All\" ||\n          (this.archiveFilter === \"Archived\"\n            ? consumer.isArchived\n            : !consumer.isArchived);\n\n        return searchMatch && statusMatch && purokMatch && archiveMatch;\n      });\n    },\n  },\n\n  async created() {\n    await this.fetchConsumers();\n  },\n\n  methods: {\n    ...mapActions(\"consumers\", [\n      \"fetchConsumers\",\n      \"createConsumer\",\n      \"updateConsumer\",\n      \"archiveConsumer\",\n    ]),\n\n    getStatusColor(status) {\n      return (\n        {\n          active: \"success\",\n          inactive: \"grey\",\n          delinquent: \"error\",\n        }[status] || \"grey\"\n      );\n    },\n\n    applyFilters() {\n      // Client-side filtering handled by computed property\n    },\n\n    resetFilters() {\n      this.search = \"\";\n      this.statusFilter = \"All\";\n      this.purokFilter = \"All\";\n      this.archiveFilter = \"Active\";\n    },\n\n    openAddDialog() {\n      this.isEdit = false;\n      this.editedItem = { ...this.defaultItem };\n      this.dialog = true;\n    },\n\n    editConsumer(item) {\n      this.isEdit = true;\n      this.editedItem = { ...item };\n      this.dialog = true;\n    },\n\n    closeDialog() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        if (this.$refs.form) {\n          this.$refs.form.reset();\n          this.editedItem = { ...this.defaultItem };\n        }\n      });\n    },\n\n    async saveConsumer() {\n      if (this.$refs.form.validate()) {\n        this.isSaving = true;\n        try {\n          if (this.isEdit) {\n            await this.updateConsumer({\n              id: this.editedItem._id,\n              consumer: this.editedItem,\n            });\n            this.snackbarText = \"Consumer updated successfully\";\n            this.snackbarColor = \"success\";\n            this.closeDialog();\n          } else {\n            if (this.editedItem.consumerType === \"New Consumer\") {\n              this.closeDialog();\n\n              this.$router.push({\n                name: \"Payments\",\n                query: { new: \"true\" },\n                params: {\n                  newConsumer: true,\n                  consumerData: {\n                    ...this.editedItem,\n                    name: `${this.editedItem.firstName} ${this.editedItem.lastName}`,\n                  },\n                },\n              });\n            } else {\n              await this.createConsumer(this.editedItem);\n              this.snackbarText = \"Consumer created successfully\";\n              this.snackbarColor = \"success\";\n              this.closeDialog();\n            }\n          }\n          await this.fetchConsumers();\n        } catch (error) {\n          this.snackbarText = error.message || \"Error saving consumer\";\n          this.snackbarColor = \"error\";\n          this.snackbar = true;\n        } finally {\n          this.isSaving = false;\n        }\n      }\n    },\n\n    async toggleArchive(item) {\n      try {\n        const reason = item.isArchived\n          ? \"Restored by user\"\n          : \"Archived by user\";\n        await this.archiveConsumer({ id: item._id, reason });\n        this.snackbarText = item.isArchived\n          ? \"Consumer restored\"\n          : \"Consumer archived\";\n        this.snackbarColor = \"success\";\n        this.snackbar = true;\n        await this.fetchConsumers(); // Refresh the list\n      } catch (error) {\n        this.snackbarText = error.message || \"Error updating archive status\";\n        this.snackbarColor = \"error\";\n        this.snackbar = true;\n      }\n    },\n\n    viewConsumer(item) {\n      this.$router.push(`/consumers/${item._id}`);\n    },\n\n    exportData() {\n      console.log(\"export\");\n    },\n  },\n  watch: {\n    \"editedItem.consumerType\"() {\n      if (this.$refs.form) {\n        this.$refs.form.validate();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-data-table ::v-deep th {\n  font-weight: 600 !important;\n}\n\n.v-data-table ::v-deep td {\n  font-size: 14px !important;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n\nth {\n  background-color: #f5f7fa;\n  font-weight: 600;\n  text-align: left;\n  padding: 12px 20px;\n  font-size: 14px;\n  color: #333;\n  border-bottom: 2px solid #dee2e6;\n}\n\ntd {\n  padding: 12px 20px;\n  font-size: 14px;\n  border-bottom: 1px solid #dee2e6;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConsumerRecords.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConsumerRecords.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ConsumerRecords.vue?vue&type=template&id=39f8cf3c&scoped=true\"\nimport script from \"./ConsumerRecords.vue?vue&type=script&lang=js\"\nexport * from \"./ConsumerRecords.vue?vue&type=script&lang=js\"\nimport style0 from \"./ConsumerRecords.vue?vue&type=style&index=0&id=39f8cf3c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39f8cf3c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["model","callback","search","expression","_c","attrs","value","statusFilter","_vm","purokFilter","archiveFilter","staticClass","on","key","fn","_v","dialog","$$v","valid","consumerTypes","editedItem","$set","_e","phoneRules","emailRules","saveConsumer","snackbarColor","scopedSlots","_u","snackbarText","staticRenderFns","name","data","breadcrumbs","text","disabled","href","isEdit","snackbar","headers","sortable","sort","a","b","fullName","localeCompare","statusItems","puroks","archiveItems","accountNo","firstName","middleName","lastName","nameExtension","fullAddress","purok","contactNumber","email","status","consumerType","defaultItem","nameRules","v","length","test","isSaving","computed","mapState","userRole","$store","state","auth","user","role","getActionButtonText","filteredConsumers","consumers","filter","consumer","searchLower","toLowerCase","searchMatch","includes","statusMatch","purokMatch","archiveMatch","isArchived","created","fetchConsumers","methods","mapActions","getStatusColor","active","inactive","delinquent","applyFilters","resetFilters","openAddDialog","editConsumer","item","closeDialog","$nextTick","$refs","form","reset","validate","updateConsumer","id","_id","$router","push","query","new","params","newConsumer","consumerData","createConsumer","error","message","toggleArchive","reason","archiveConsumer","viewConsumer","exportData","console","log","watch","component","render"],"sourceRoot":""}