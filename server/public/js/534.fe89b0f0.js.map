{"version":3,"file":"js/534.fe89b0f0.js","mappings":"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","sources":["webpack://client/../../../src/mixins/rippleable/index.ts","webpack://client/../../../src/mixins/selectable/index.ts","webpack://client/../../../src/components/VCheckbox/VCheckbox.ts","webpack://client/./src/views/admin/Payments.vue","webpack://client/./src/components/ReceiptPrintDialog.vue","webpack://client/src/components/ReceiptPrintDialog.vue","webpack://client/./src/components/ReceiptPrintDialog.vue?81e7","webpack://client/./src/components/ReceiptPrintDialog.vue?8d8b","webpack://client/src/views/admin/Payments.vue","webpack://client/./src/views/admin/Payments.vue?12b2","webpack://client/./src/views/admin/Payments.vue?4616"],"sourcesContent":["// Directives\nimport ripple from '../../directives/ripple'\n\n// Types\nimport Vue, { VNode, VNodeData, VNodeDirective } from 'vue'\n\nexport default Vue.extend({\n  name: 'rippleable',\n\n  directives: { ripple },\n\n  props: {\n    ripple: {\n      type: [Boolean, Object],\n      default: true,\n    },\n  },\n\n  methods: {\n    genRipple (data: VNodeData = {}): VNode | null {\n      if (!this.ripple) return null\n\n      data.staticClass = 'v-input--selection-controls__ripple'\n\n      data.directives = data.directives || []\n      data.directives.push({\n        name: 'ripple',\n        value: { center: true },\n      } as VNodeDirective)\n\n      return this.$createElement('div', data)\n    },\n  },\n})\n","// Components\nimport VInput from '../../components/VInput'\n\n// Mixins\nimport Rippleable from '../rippleable'\nimport Comparable from '../comparable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\nexport function prevent (e: Event) {\n  e.preventDefault()\n}\n\n/* @vue/component */\nexport default mixins(\n  VInput,\n  Rippleable,\n  Comparable\n).extend({\n  name: 'selectable',\n\n  model: {\n    prop: 'inputValue',\n    event: 'change',\n  },\n\n  props: {\n    id: String,\n    inputValue: null as any,\n    falseValue: null as any,\n    trueValue: null as any,\n    multiple: {\n      type: Boolean,\n      default: null,\n    },\n    label: String,\n  },\n\n  data () {\n    return {\n      hasColor: this.inputValue,\n      lazyValue: this.inputValue,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (!this.isActive) return undefined\n      if (this.color) return this.color\n      if (this.isDark && !this.appIsDark) return 'white'\n      return 'primary'\n    },\n    isMultiple (): boolean {\n      return this.multiple === true || (this.multiple === null && Array.isArray(this.internalValue))\n    },\n    isActive (): boolean {\n      const value = this.value\n      const input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) return false\n\n        return input.some(item => this.valueComparator(item, value))\n      }\n\n      if (this.trueValue === undefined || this.falseValue === undefined) {\n        return value\n          ? this.valueComparator(value, input)\n          : Boolean(input)\n      }\n\n      return this.valueComparator(input, this.trueValue)\n    },\n    isDirty (): boolean {\n      return this.isActive\n    },\n    rippleState (): string | undefined {\n      return !this.isDisabled && !this.validationState\n        ? undefined\n        : this.validationState\n    },\n  },\n\n  watch: {\n    inputValue (val) {\n      this.lazyValue = val\n      this.hasColor = val\n    },\n  },\n\n  methods: {\n    genLabel () {\n      const label = VInput.options.methods.genLabel.call(this)\n\n      if (!label) return label\n\n      label!.data!.on = {\n        // Label shouldn't cause the input to focus\n        click: prevent,\n      }\n\n      return label\n    },\n    genInput (type: string, attrs: object) {\n      return this.$createElement('input', {\n        attrs: Object.assign({\n          'aria-checked': this.isActive.toString(),\n          disabled: this.isDisabled,\n          id: this.computedId,\n          role: type,\n          type,\n        }, attrs),\n        domProps: {\n          value: this.value,\n          checked: this.isActive,\n        },\n        on: {\n          blur: this.onBlur,\n          change: this.onChange,\n          focus: this.onFocus,\n          keydown: this.onKeydown,\n          click: prevent,\n        },\n        ref: 'input',\n      })\n    },\n    onClick (e: Event) {\n      this.onChange()\n      this.$emit('click', e)\n    },\n    onChange () {\n      if (!this.isInteractive) return\n\n      const value = this.value\n      let input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) {\n          input = []\n        }\n\n        const length = input.length\n\n        input = input.filter((item: any) => !this.valueComparator(item, value))\n\n        if (input.length === length) {\n          input.push(value)\n        }\n      } else if (this.trueValue !== undefined && this.falseValue !== undefined) {\n        input = this.valueComparator(input, this.trueValue) ? this.falseValue : this.trueValue\n      } else if (value) {\n        input = this.valueComparator(input, value) ? null : value\n      } else {\n        input = !input\n      }\n\n      this.validate(true, input)\n      this.internalValue = input\n      this.hasColor = input\n    },\n    onFocus (e: FocusEvent) {\n      this.isFocused = true\n      this.$emit('focus', e)\n    },\n    onBlur (e: FocusEvent) {\n      this.isFocused = false\n      this.$emit('blur', e)\n    },\n    /** @abstract */\n    onKeydown (e: Event) {},\n  },\n})\n","// Styles\nimport './VCheckbox.sass'\nimport '../../styles/components/_selection-controls.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VInput from '../VInput'\n\n// Mixins\nimport Selectable from '../../mixins/selectable'\n\n/* @vue/component */\nexport default Selectable.extend({\n  name: 'v-checkbox',\n\n  props: {\n    indeterminate: Boolean,\n    indeterminateIcon: {\n      type: String,\n      default: '$checkboxIndeterminate',\n    },\n    offIcon: {\n      type: String,\n      default: '$checkboxOff',\n    },\n    onIcon: {\n      type: String,\n      default: '$checkboxOn',\n    },\n  },\n\n  data () {\n    return {\n      inputIndeterminate: this.indeterminate,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-input--selection-controls': true,\n        'v-input--checkbox': true,\n        'v-input--indeterminate': this.inputIndeterminate,\n      }\n    },\n    computedIcon (): string {\n      if (this.inputIndeterminate) {\n        return this.indeterminateIcon\n      } else if (this.isActive) {\n        return this.onIcon\n      } else {\n        return this.offIcon\n      }\n    },\n    // Do not return undefined if disabled,\n    // according to spec, should still show\n    // a color when disabled and active\n    validationState (): string | undefined {\n      if (this.isDisabled && !this.inputIndeterminate) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor !== null) return this.computedColor\n      return undefined\n    },\n  },\n\n  watch: {\n    indeterminate (val) {\n      // https://github.com/vuetifyjs/vuetify/issues/8270\n      this.$nextTick(() => (this.inputIndeterminate = val))\n    },\n    inputIndeterminate (val) {\n      this.$emit('update:indeterminate', val)\n    },\n    isActive () {\n      if (!this.indeterminate) return\n      this.inputIndeterminate = false\n    },\n  },\n\n  methods: {\n    genCheckbox () {\n      const { title, ...checkboxAttrs } = this.attrs$\n      return this.$createElement('div', {\n        staticClass: 'v-input--selection-controls__input',\n      }, [\n        this.$createElement(VIcon, this.setTextColor(this.validationState, {\n          props: {\n            dense: this.dense,\n            dark: this.dark,\n            light: this.light,\n          },\n        }), this.computedIcon),\n        this.genInput('checkbox', {\n          ...checkboxAttrs,\n          'aria-checked': this.inputIndeterminate\n            ? 'mixed'\n            : this.isActive.toString(),\n        }),\n        this.genRipple(this.setTextColor(this.rippleState)),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genCheckbox(),\n        this.genLabel(),\n      ]\n    },\n  },\n})\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{staticClass:\"pa-0\",attrs:{\"fluid\":\"\"}},[_c('v-card',{staticClass:\"mb-4\",attrs:{\"flat\":\"\"}},[_c('v-card-text',[_c('div',{staticClass:\"text-caption grey--text mb-1\"},[_vm._v(\" Home / Payments / New Payment \")]),_c('div',{staticClass:\"text-h5 primary--text font-weight-bold\"},[_vm._v(\"New Payment\")])])],1),_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"grey lighten-4\"},[_vm._v(\"Payment Processing\")]),_c('v-card-text',[_c('v-row',{staticClass:\"grey lighten-5 pa-4 mb-4\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Account No.\")]),_c('div',{staticClass:\"body-1 font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.consumer.accountNo)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Consumer Name\")]),_c('div',{staticClass:\"body-1 font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.consumer.name)+\" \")])]),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Consumer Type\")]),_c('v-chip',{attrs:{\"x-small\":\"\",\"color\":\"warning\",\"label\":\"\"}},[_vm._v(_vm._s(_vm.consumer.type))])],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Status\")]),_c('div',{staticClass:\"body-1 font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.consumer.status)+\" \")])])],1),_c('div',{staticClass:\"mb-6\"},[_c('div',{staticClass:\"text-subtitle-1 primary--text font-weight-medium mb-3\"},[_vm._v(\" Select Transactions \")]),_c('v-card',{attrs:{\"outlined\":\"\"}},[_c('v-list',_vm._l((_vm.displayedFees),function(fee,index){return _c('v-list-item',{key:index},[_c('v-list-item-action',[_c('v-checkbox',{attrs:{\"disabled\":fee.disabled},model:{value:(fee.selected),callback:function ($$v) {_vm.$set(fee, \"selected\", $$v)},expression:\"fee.selected\"}})],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(fee.name))]),_c('v-list-item-subtitle',{staticClass:\"text-caption\"},[_vm._v(\" \"+_vm._s(fee.description)+\" \")])],1),_c('v-list-item-action',[_vm._v(\"₱\"+_vm._s(fee.amount.toFixed(2)))])],1)}),1)],1)],1),_c('div',{staticClass:\"mb-6\"},[_c('div',{staticClass:\"text-subtitle-1 primary--text font-weight-medium mb-3\"},[_vm._v(\" Payment Details \")]),_c('v-text-field',{attrs:{\"label\":\"Amount Received\",\"prefix\":\"₱\",\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\",\"error-messages\":_vm.amountReceivedError,\"min\":\"0\",\"step\":\"0.01\"},model:{value:(_vm.amountReceived),callback:function ($$v) {_vm.amountReceived=$$v},expression:\"amountReceived\"}}),_c('v-card',{staticClass:\"grey lighten-5 mb-4\",attrs:{\"outlined\":\"\"}},[_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Amount Received\")]),_c('v-list-item-action',[_vm._v(\"₱\"+_vm._s(_vm.amountReceived))])],1),_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Total Amount Due\")]),_c('v-list-item-action',[_vm._v(\"₱\"+_vm._s(_vm.totalAmountDue.toFixed(2)))])],1),_c('v-divider'),_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Change\")]),_c('v-list-item-action',{staticClass:\"success--text font-weight-bold\"},[_vm._v(\" ₱\"+_vm._s(_vm.calculateChange.toFixed(2))+\" \")])],1)],1)],1)],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"primary white--text\"},[_vm._v(\"Transaction Summary\")]),_c('v-card-text',{staticClass:\"pt-4\"},[_vm._l((_vm.summaryItems),function(item,index){return _c('v-list-item',{key:index},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(item.name))])],1),_c('v-list-item-action',[_vm._v(\"₱\"+_vm._s(item.amount.toFixed(2)))])],1)}),_c('v-divider',{staticClass:\"my-4\"}),_c('v-list-item',{staticClass:\"font-weight-bold\"},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Total Amount Due\")])],1),_c('v-list-item-action',[_vm._v(\"₱\"+_vm._s(_vm.totalAmountDue.toFixed(2)))])],1),_c('v-btn',{staticClass:\"mt-6\",attrs:{\"color\":\"primary\",\"block\":\"\",\"disabled\":!_vm.isValidPayment || !!_vm.amountReceivedError,\"loading\":_vm.loading},on:{\"click\":_vm.processPayment}},[_vm._v(\" \"+_vm._s(_vm.loading ? \"Processing...\" : \"Process Payment\")+\" \")]),_c('v-btn',{staticClass:\"mt-2\",attrs:{\"block\":\"\",\"text\":\"\",\"disabled\":_vm.loading},on:{\"click\":_vm.cancel}},[_vm._v(\" Cancel \")])],2)],1)],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":\"3000\"},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\"Close\")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")]),_c('receipt-print-dialog',{attrs:{\"payment\":_vm.receiptData},model:{value:(_vm.showReceiptDialog),callback:function ($$v) {_vm.showReceiptDialog=$$v},expression:\"showReceiptDialog\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-dialog',{attrs:{\"max-width\":\"400px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline primary white--text\"},[_vm._v(\" Review Receipt \")]),_c('v-card-text',{staticClass:\"pa-4\"},[_c('div',{staticClass:\"receipt-preview\"},[_c('div',{staticClass:\"text-center mb-4\"},[_c('div',{staticClass:\"text-h6 font-weight-bold\"},[_vm._v(\"BASAK WATER DISTRICT\")]),_c('div',{staticClass:\"text-subtitle-1\"},[_vm._v(\"Official Receipt\")]),_c('div',{staticClass:\"text-caption\"},[_vm._v(\" \"+_vm._s(_vm.formatDate(_vm.payment.date))+\" \")])]),_c('v-card',{staticClass:\"mb-4 pa-3\",attrs:{\"outlined\":\"\"}},[_c('div',[_c('strong',[_vm._v(\"Account No:\")]),_vm._v(\" \"+_vm._s(_vm.payment.consumer.accountNo))]),_c('div',[_c('strong',[_vm._v(\"Consumer:\")]),_vm._v(\" \"+_vm._s(_vm.payment.consumer.name))]),_c('div',[_c('strong',[_vm._v(\"Status:\")]),_vm._v(\" \"+_vm._s(_vm.payment.consumer.status))])]),_c('div',{staticClass:\"text-subtitle-1 font-weight-medium mb-2\"},[_vm._v(\"Payment Details\")]),_c('v-card',{staticClass:\"mb-4\",attrs:{\"outlined\":\"\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},_vm._l((_vm.payment.items),function(item,index){return _c('v-list-item',{key:index},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(item.name))]),_c('v-list-item-subtitle',{staticClass:\"text-caption\"},[_vm._v(\" \"+_vm._s(item.description)+\" \")])],1),_c('v-list-item-action',{staticClass:\"text-right\"},[_vm._v(\" ₱\"+_vm._s(item.amount.toFixed(2))+\" \")])],1)}),1)],1),_c('v-card',{staticClass:\"mb-4\",attrs:{\"outlined\":\"\"}},[_c('v-list',{attrs:{\"dense\":\"\"}},[_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Total Amount Due\")]),_c('v-list-item-action',{staticClass:\"font-weight-medium\"},[_vm._v(\" ₱\"+_vm._s(_vm.payment.totalAmount.toFixed(2))+\" \")])],1),_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Amount Received\")]),_c('v-list-item-action',{staticClass:\"font-weight-medium\"},[_vm._v(\" ₱\"+_vm._s(_vm.payment.amountReceived.toFixed(2))+\" \")])],1),_c('v-divider'),_c('v-list-item',[_c('v-list-item-content',[_vm._v(\"Change\")]),_c('v-list-item-action',{staticClass:\"success--text font-weight-bold\"},[_vm._v(\" ₱\"+_vm._s(_vm.payment.change.toFixed(2))+\" \")])],1)],1)],1),_c('div',{staticClass:\"text-center text-caption grey--text\"},[_c('div',[_vm._v(\"Thank you for your payment!\")]),_c('div',[_vm._v(\"Keep this receipt for future reference\")]),_c('div',[_vm._v(_vm._s(_vm.generateReceiptNumber()))])])],1)]),_c('v-divider'),_c('v-card-actions',{staticClass:\"pa-4\"},[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":_vm.loading},on:{\"click\":_vm.close}},[_vm._v(\" Cancel \")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"loading\":_vm.loading,\"disabled\":_vm.loading},on:{\"click\":_vm.print}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-printer\")]),_vm._v(\" Print \")],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":3000},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\" Close \")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"dialog\" max-width=\"400px\">\n    <v-card>\n      <v-card-title class=\"headline primary white--text\">\n        Review Receipt\n      </v-card-title>\n      \n      <v-card-text class=\"pa-4\">\n        <div class=\"receipt-preview\">\n          <div class=\"text-center mb-4\">\n            <div class=\"text-h6 font-weight-bold\">BASAK WATER DISTRICT</div>\n            <div class=\"text-subtitle-1\">Official Receipt</div>\n            <div class=\"text-caption\">\n              {{ formatDate(payment.date) }}\n            </div>\n          </div>\n\n          <v-card outlined class=\"mb-4 pa-3\">\n            <div><strong>Account No:</strong> {{ payment.consumer.accountNo }}</div>\n            <div><strong>Consumer:</strong> {{ payment.consumer.name }}</div>\n            <div><strong>Status:</strong> {{ payment.consumer.status }}</div>\n          </v-card>\n\n          <div class=\"text-subtitle-1 font-weight-medium mb-2\">Payment Details</div>\n          <v-card outlined class=\"mb-4\">\n            <v-list dense>\n              <v-list-item v-for=\"(item, index) in payment.items\" :key=\"index\">\n                <v-list-item-content>\n                  <v-list-item-title>{{ item.name }}</v-list-item-title>\n                  <v-list-item-subtitle class=\"text-caption\">\n                    {{ item.description }}\n                  </v-list-item-subtitle>\n                </v-list-item-content>\n                <v-list-item-action class=\"text-right\">\n                  ₱{{ item.amount.toFixed(2) }}\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n\n          <v-card outlined class=\"mb-4\">\n            <v-list dense>\n              <v-list-item>\n                <v-list-item-content>Total Amount Due</v-list-item-content>\n                <v-list-item-action class=\"font-weight-medium\">\n                  ₱{{ payment.totalAmount.toFixed(2) }}\n                </v-list-item-action>\n              </v-list-item>\n              <v-list-item>\n                <v-list-item-content>Amount Received</v-list-item-content>\n                <v-list-item-action class=\"font-weight-medium\">\n                  ₱{{ payment.amountReceived.toFixed(2) }}\n                </v-list-item-action>\n              </v-list-item>\n              <v-divider></v-divider>\n              <v-list-item>\n                <v-list-item-content>Change</v-list-item-content>\n                <v-list-item-action class=\"success--text font-weight-bold\">\n                  ₱{{ payment.change.toFixed(2) }}\n                </v-list-item-action>\n              </v-list-item>\n            </v-list>\n          </v-card>\n\n          <!-- Footer -->\n          <div class=\"text-center text-caption grey--text\">\n            <div>Thank you for your payment!</div>\n            <div>Keep this receipt for future reference</div>\n            <div>{{ generateReceiptNumber() }}</div>\n          </div>\n        </div>\n      </v-card-text>\n\n      <v-divider></v-divider>\n\n      <v-card-actions class=\"pa-4\">\n        <v-spacer></v-spacer>\n        <v-btn\n          text\n          @click=\"close\"\n          :disabled=\"loading\"\n        >\n          Cancel\n        </v-btn>\n        <v-btn\n          color=\"primary\"\n          @click=\"print\"\n          :loading=\"loading\"\n          :disabled=\"loading\"\n        >\n          <v-icon left>mdi-printer</v-icon>\n          Print\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n\n    <!-- Status Snackbar -->\n    <v-snackbar\n      v-model=\"snackbar\"\n      :color=\"snackbarColor\"\n      :timeout=\"3000\"\n    >\n      {{ snackbarText }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn\n          text\n          v-bind=\"attrs\"\n          @click=\"snackbar = false\"\n        >\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  name: 'ReceiptPrintDialog',\n  \n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    },\n    payment: {\n      type: Object,\n    }\n  },\n\n  data: () => ({\n    loading: false,\n    snackbar: false,\n    snackbarText: '',\n    snackbarColor: 'success'\n  }),\n\n  computed: {\n    dialog: {\n      get() {\n        return this.value;\n      },\n      set(value) {\n        this.$emit('input', value);\n      }\n    }\n  },\n\n  methods: {\n    formatDate(date) {\n      return new Date(date).toLocaleString('en-PH', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n    },\n\n    generateReceiptNumber() {\n      const timestamp = new Date().getTime();\n      return `Receipt #: ${timestamp}`;\n    },\n\n\n    async print() {\n      this.loading = true;\n      try {\n        await this.$parent.printReceipt();\n        this.snackbarText = 'Receipt printed successfully';\n        this.snackbarColor = 'success';\n        this.snackbar = true;\n        \n        \n        setTimeout(() => {\n          this.close();\n          this.$router.push({ \n            name: 'ConsumerRecords',\n            params: { \n              refreshData: true \n            }\n          });\n        }, 1000);\n      } catch (error) {\n        console.error('Print failed:', error);\n        this.snackbarText = 'Failed to print receipt';\n        this.snackbarColor = 'error';\n        this.snackbar = true;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    close() {\n      if (this.loading) return;\n      this.dialog = false;\n      this.$router.push({ name: 'ConsumerRecords' });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.receipt-preview {\n  font-family: 'Roboto Mono', monospace;\n  white-space: pre-line;\n}\n\n.v-list-item {\n  min-height: 40px !important;\n}\n\n.v-list-item__action {\n  margin: 4px 0 !important;\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReceiptPrintDialog.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ReceiptPrintDialog.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ReceiptPrintDialog.vue?vue&type=template&id=1f978af7&scoped=true\"\nimport script from \"./ReceiptPrintDialog.vue?vue&type=script&lang=js\"\nexport * from \"./ReceiptPrintDialog.vue?vue&type=script&lang=js\"\nimport style0 from \"./ReceiptPrintDialog.vue?vue&type=style&index=0&id=1f978af7&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f978af7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-container fluid class=\"pa-0\">\n    <!-- Page Header -->\n    <v-card flat class=\"mb-4\">\n      <v-card-text>\n        <div class=\"text-caption grey--text mb-1\">\n          Home / Payments / New Payment\n        </div>\n        <div class=\"text-h5 primary--text font-weight-bold\">New Payment</div>\n      </v-card-text>\n    </v-card>\n\n    <v-container>\n      <v-row>\n        <!-- Payment Form Section -->\n        <v-col cols=\"12\" md=\"8\">\n          <v-card>\n            <v-card-title class=\"grey lighten-4\"\n              >Payment Processing</v-card-title\n            >\n\n            <v-card-text>\n              <!-- Consumer Information -->\n              <v-row class=\"grey lighten-5 pa-4 mb-4\">\n                <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                  <div class=\"caption grey--text\">Account No.</div>\n                  <div class=\"body-1 font-weight-medium\">\n                    {{ consumer.accountNo }}\n                  </div>\n                </v-col>\n                <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                  <div class=\"caption grey--text\">Consumer Name</div>\n                  <div class=\"body-1 font-weight-medium\">\n                    {{ consumer.name }}\n                  </div>\n                </v-col>\n                <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                  <div class=\"caption grey--text\">Consumer Type</div>\n                  <v-chip x-small color=\"warning\" label>{{\n                    consumer.type\n                  }}</v-chip>\n                </v-col>\n                <v-col cols=\"12\" sm=\"6\" md=\"3\">\n                  <div class=\"caption grey--text\">Status</div>\n                  <div class=\"body-1 font-weight-medium\">\n                    {{ consumer.status }}\n                  </div>\n                </v-col>\n              </v-row>\n\n              <!-- Transaction Selection -->\n              <div class=\"mb-6\">\n                <div\n                  class=\"text-subtitle-1 primary--text font-weight-medium mb-3\"\n                >\n                  Select Transactions\n                </div>\n                <v-card outlined>\n                  <v-list>\n                    <v-list-item\n                      v-for=\"(fee, index) in displayedFees\"\n                      :key=\"index\"\n                    >\n                      <v-list-item-action>\n                        <v-checkbox\n                          v-model=\"fee.selected\"\n                          :disabled=\"fee.disabled\"\n                        ></v-checkbox>\n                      </v-list-item-action>\n                      <v-list-item-content>\n                        <v-list-item-title>{{ fee.name }}</v-list-item-title>\n                        <v-list-item-subtitle class=\"text-caption\">\n                          {{ fee.description }}\n                        </v-list-item-subtitle>\n                      </v-list-item-content>\n                      <v-list-item-action\n                        >₱{{ fee.amount.toFixed(2) }}</v-list-item-action\n                      >\n                    </v-list-item>\n                  </v-list>\n                </v-card>\n              </div>\n\n              <!-- Payment Details -->\n              <div class=\"mb-6\">\n                <div\n                  class=\"text-subtitle-1 primary--text font-weight-medium mb-3\"\n                >\n                  Payment Details\n                </div>\n                <v-text-field\n                  v-model=\"amountReceived\"\n                  label=\"Amount Received\"\n                  prefix=\"₱\"\n                  type=\"number\"\n                  outlined\n                  dense\n                  :error-messages=\"amountReceivedError\"\n                  min=\"0\"\n                  step=\"0.01\"\n                ></v-text-field>\n\n                <!-- Payment Calculation -->\n                <v-card outlined class=\"grey lighten-5 mb-4\">\n                  <v-list-item>\n                    <v-list-item-content>Amount Received</v-list-item-content>\n                    <v-list-item-action\n                      >₱{{ amountReceived }}</v-list-item-action\n                    >\n                  </v-list-item>\n                  <v-list-item>\n                    <v-list-item-content>Total Amount Due</v-list-item-content>\n                    <v-list-item-action\n                      >₱{{ totalAmountDue.toFixed(2) }}</v-list-item-action\n                    >\n                  </v-list-item>\n                  <v-divider></v-divider>\n                  <v-list-item>\n                    <v-list-item-content>Change</v-list-item-content>\n                    <v-list-item-action class=\"success--text font-weight-bold\">\n                      ₱{{ calculateChange.toFixed(2) }}\n                    </v-list-item-action>\n                  </v-list-item>\n                </v-card>\n              </div>\n            </v-card-text>\n          </v-card>\n        </v-col>\n\n        <v-col cols=\"12\" md=\"4\">\n          <v-card>\n            <v-card-title class=\"primary white--text\"\n              >Transaction Summary</v-card-title\n            >\n            <v-card-text class=\"pt-4\">\n              <v-list-item v-for=\"(item, index) in summaryItems\" :key=\"index\">\n                <v-list-item-content>\n                  <v-list-item-title>{{ item.name }}</v-list-item-title>\n                </v-list-item-content>\n                <v-list-item-action\n                  >₱{{ item.amount.toFixed(2) }}</v-list-item-action\n                >\n              </v-list-item>\n\n              <v-divider class=\"my-4\"></v-divider>\n\n              <v-list-item class=\"font-weight-bold\">\n                <v-list-item-content>\n                  <v-list-item-title>Total Amount Due</v-list-item-title>\n                </v-list-item-content>\n                <v-list-item-action\n                  >₱{{ totalAmountDue.toFixed(2) }}</v-list-item-action\n                >\n              </v-list-item>\n\n              <v-btn\n                color=\"primary\"\n                block\n                class=\"mt-6\"\n                @click=\"processPayment\"\n                :disabled=\"!isValidPayment || !!amountReceivedError\"\n                :loading=\"loading\"\n              >\n                {{ loading ? \"Processing...\" : \"Process Payment\" }}\n              </v-btn>\n\n              <v-btn\n                block\n                text\n                class=\"mt-2\"\n                @click=\"cancel\"\n                :disabled=\"loading\"\n              >\n                Cancel\n              </v-btn>\n            </v-card-text>\n          </v-card>\n        </v-col>\n      </v-row>\n    </v-container>\n\n    <!-- Snackbar -->\n    <v-snackbar v-model=\"snackbar\" :color=\"snackbarColor\" timeout=\"3000\">\n      {{ snackbarText }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn text v-bind=\"attrs\" @click=\"snackbar = false\">Close</v-btn>\n      </template>\n    </v-snackbar>\n\n    <receipt-print-dialog v-model=\"showReceiptDialog\" :payment=\"receiptData\" />\n  </v-container>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\nimport ReceiptPrintDialog from \"@/components/ReceiptPrintDialog.vue\";\n\nexport default {\n  name: \"PaymentPage\",\n  components: {\n    ReceiptPrintDialog,\n  },\n\n  data: () => ({\n    consumer: {\n      accountNo: \"\",\n      name: \"\",\n      type: \"\",\n      status: \"\",\n    },\n    fees: [\n      {\n        name: \"Current Bill\",\n        amount: 0,\n        selected: true,\n        disabled: true,\n        description: \"Current water bill payment\",\n        paymentType: \"BILL_PAYMENT\",\n      },\n      {\n        name: \"Unpaid Balance\",\n        amount: 0,\n        selected: true,\n        disabled: true,\n        description: \"Unpaid balance\",\n        paymentType: \"BILL_PAYMENT\",\n      },\n      {\n        name: \"Membership Fee\",\n        amount: 300.0,\n        selected: false,\n        disabled: false,\n        description: \"One-time membership fee for new consumers\",\n        paymentType: \"MEMBERSHIP_FEE\",\n      },\n      {\n        name: \"Reconnection Fee\",\n        amount: 50.0,\n        selected: false,\n        disabled: false,\n        description: \"Water reconnection service fee\",\n        paymentType: \"RECONNECTION_FEE\",\n      },\n    ],\n    amountReceived: 0,\n    loading: false,\n    snackbar: false,\n    snackbarText: \"\",\n    snackbarColor: \"\",\n    printer: {\n      device: null,\n      characteristic: null,\n      isConnected: false,\n      loading: false,\n    },\n    showReceiptDialog: false,\n    receiptData: null,\n  }),\n\n  computed: {\n    ...mapState(\"consumers\", [\"currentConsumer\"]),\n    ...mapState(\"billings\", [\"currentBill\"]),\n\n    displayedFees() {\n      if (this.$route.query.new === \"true\") {\n        return this.fees.filter((fee) => fee.name === \"Membership Fee\");\n      }\n\n      let displayFees = this.fees.filter((fee) => fee.name === \"Current Bill\");\n\n      const unpaidBalanceFee = this.fees.find(\n        (f) => f.name === \"Unpaid Balance\"\n      );\n      if (unpaidBalanceFee && unpaidBalanceFee.amount > 0) {\n        displayFees.push(unpaidBalanceFee);\n      }\n\n      if (this.consumer.status.toLowerCase() === \"disconnected\") {\n        const reconnectionFee = this.fees.find(\n          (f) => f.name === \"Reconnection Fee\"\n        );\n        if (reconnectionFee) {\n          displayFees.push(reconnectionFee);\n        }\n      }\n\n      return displayFees;\n    },\n\n    summaryItems() {\n      return this.fees\n        .filter((fee) => fee.selected)\n        .map((fee) => ({\n          name: fee.name,\n          amount: fee.amount,\n          description: fee.description,\n          paymentType: fee.paymentType,\n          billId: fee.billId,\n          billIds: fee.billIds,\n        }));\n    },\n\n    totalAmountDue() {\n      return this.summaryItems.reduce((total, item) => total + item.amount, 0);\n    },\n\n    calculateChange() {\n      return this.amountReceived - this.totalAmountDue;\n    },\n\n    isValidPayment() {\n      return (\n        this.amountReceived >= this.totalAmountDue && this.totalAmountDue > 0\n      );\n    },\n\n    amountReceivedError() {\n      if (this.amountReceived < this.totalAmountDue) {\n        return \"Amount received must be greater than or equal to total amount due\";\n      }\n      return \"\";\n    },\n  },\n\n  watch: {\n    amountReceived(val) {\n      const amount = parseFloat(val);\n      if (amount < 0) {\n        this.amountReceived = 0;\n      } else {\n        this.amountReceived = amount;\n      }\n    },\n  },\n\n  async created() {\n    await this.initializePaymentData();\n  },\n\n  methods: {\n    ...mapActions(\"consumers\", [\"fetchConsumerById\"]),\n    ...mapActions(\"billings\", [\n      \"fetchBillById\",\n      \"fetchUnpaidBills\",\n      \"updateBill\",\n    ]),\n\n    async ensurePrinterConnection() {\n      if (!this.printer.isConnected) {\n        return this.initializePrinter();\n      }\n      return true;\n    },\n\n    async initializePrinter() {\n      if (this.printer.isConnected) return true;\n\n      try {\n        const device = await navigator.bluetooth.requestDevice({\n          filters: [\n            { services: [\"000018f0-0000-1000-8000-00805f9b34fb\"] },\n            { namePrefix: \"POS\" },\n          ],\n        });\n\n        const server = await device.gatt.connect();\n        const service = await server.getPrimaryService(\n          \"000018f0-0000-1000-8000-00805f9b34fb\"\n        );\n        const characteristic = await service.getCharacteristic(\n          \"00002af1-0000-1000-8000-00805f9b34fb\"\n        );\n\n        this.printer = {\n          device,\n          characteristic,\n          isConnected: true,\n          loading: false,\n        };\n\n        device.addEventListener(\"gattserverdisconnected\", () => {\n          this.printer.isConnected = false;\n        });\n\n        return true;\n      } catch (error) {\n        console.error(\"Printer initialization error:\", error);\n        this.printer.isConnected = false;\n        return false;\n      }\n    },\n\n    async initializePaymentData() {\n      try {\n        if (this.$route.query.new === \"true\") {\n          const consumerData = this.$route.params.consumerData;\n\n          this.consumer = {\n            accountNo: consumerData.accountNo,\n            name: `${consumerData.firstName} ${consumerData.lastName}`,\n            type: consumerData.consumerType,\n            status: consumerData.status,\n          };\n\n          this.fees = this.fees.filter((fee) => fee.name === \"Membership Fee\");\n          const membershipFee = this.fees[0];\n          if (membershipFee) {\n            membershipFee.selected = true;\n            membershipFee.disabled = true;\n            this.amountReceived = membershipFee.amount;\n          }\n        } else {\n          const bill = await this.fetchBillById(this.$route.query.billId);\n          const consumer = await this.fetchConsumerById(\n            this.$route.query.consumerId\n          );\n\n          this.consumer = {\n            accountNo: consumer.accountNo,\n            name: `${consumer.firstName} ${consumer.lastName}`,\n            type: consumer.consumerType || \"old\",\n            status: consumer.status,\n          };\n\n          const currentBillFee = this.fees.find(\n            (f) => f.name === \"Current Bill\"\n          );\n          if (currentBillFee) {\n            currentBillFee.amount = bill.amount;\n            currentBillFee.billId = bill._id;\n          }\n\n          const unpaidBills = await this.fetchUnpaidBills(\n            this.$route.query.consumerId\n          );\n\n          const previousBalanceBills = unpaidBills.filter(\n            (b) => b._id !== bill._id\n          );\n          const previousBalance = previousBalanceBills.reduce(\n            (total, b) => total + b.amount,\n            0\n          );\n\n          const previousBalanceFee = this.fees.find(\n            (f) => f.name === \"Unpaid Balance\"\n          );\n          if (previousBalanceFee) {\n            previousBalanceFee.amount = previousBalance;\n            previousBalanceFee.billIds = previousBalanceBills.map((b) => b._id);\n          }\n\n          if (consumer.status.toLowerCase() === \"disconnected\") {\n            const reconnectionFee = this.fees.find(\n              (f) => f.name === \"Reconnection Fee\"\n            );\n            if (reconnectionFee) {\n              reconnectionFee.selected = true;\n              reconnectionFee.disabled = false;\n            }\n          }\n        }\n      } catch (error) {\n        this.snackbarText = \"Error initializing payment data\";\n        this.snackbarColor = \"error\";\n        this.snackbar = true;\n      }\n    },\n    async processPayment() {\n      if (!this.isValidPayment || this.amountReceivedError) return;\n\n      this.loading = true;\n      try {\n        const isNewMember = this.$route.query.new === \"true\";\n\n        const consumerData = isNewMember\n          ? this.$route.params.consumerData\n          : null;\n\n        const paymentData = {\n          consumerData: isNewMember ? consumerData : null,\n          amount: this.totalAmountDue,\n          amountReceived: parseFloat(this.amountReceived),\n          change: this.calculateChange,\n          paymentType: isNewMember ? \"MEMBERSHIP_FEE\" : \"BILL_PAYMENT\",\n          selectedFees: this.summaryItems,\n          paymentMethod: \"CASH\",\n          status: \"completed\",\n          notes: `Payment for ${this.summaryItems\n            .map((item) => item.name)\n            .join(\", \")}`,\n          consumerId: !isNewMember ? this.$route.query.consumerId : null,\n        };\n\n        const response = await this.$store.dispatch(\n          \"payments/createPayment\",\n          paymentData\n        );\n\n        this.receiptData = {\n          consumer: isNewMember ? consumerData : this.consumer,\n          items: this.summaryItems,\n          totalAmount: this.totalAmountDue,\n          amountReceived: parseFloat(this.amountReceived),\n          change: this.calculateChange,\n          date: new Date(),\n        };\n\n        this.showReceiptDialog = true;\n        this.snackbarText = \"Payment processed successfully\";\n        this.snackbarColor = \"success\";\n        this.snackbar = true;\n\n        // setTimeout(() => {\n        //   this.$router.push({\n        //     name: \"ConsumerRecords\",\n        //   });\n        // }, 3000);\n      } catch (error) {\n        this.snackbarText = error.message || \"Error processing payment\";\n        this.snackbarColor = \"error\";\n        this.snackbar = true;\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    async printReceipt() {\n      try {\n        if (!this.printer.isConnected) {\n          await this.initializePrinter();\n        }\n\n        const ESC = \"\\x1B\";\n        const GS = \"\\x1D\";\n        const CENTER = `${ESC}a1`;\n        const LEFT = `${ESC}a0`;\n        const BOLD = `${ESC}E1`;\n        const NORMAL = `${ESC}E0`;\n        const INIT = `${ESC}@`;\n        const CUT = `${GS}V1`;\n\n        const receiptContent = [\n          INIT,\n          CENTER,\n          BOLD,\n          \"BASAK WATER DISTRICT\\n\",\n          NORMAL,\n          \"Official Receipt\\n\",\n          `${new Date().toLocaleDateString()}\\n`,\n          `${new Date().toLocaleTimeString()}\\n`,\n          \"--------------------------------\\n\",\n\n          LEFT,\n          `Account No: ${this.consumer.accountNo}\\n`,\n          `Consumer : ${this.consumer.name}\\n`,\n          \"--------------------------------\\n\",\n\n          ...this.summaryItems.map(\n            (item) =>\n              `${item.name}\\n` +\n              `Amount:`.padEnd(24) +\n              `P${item.amount.toFixed(2)}\\n`\n          ),\n          \"--------------------------------\\n\",\n\n          BOLD,\n          `Total Amount Due : P${this.totalAmountDue.toFixed(2)}\\n`,\n          `Amount Received  : P${this.amountReceived}\\n`,\n          `Change          : P${this.calculateChange.toFixed(2)}\\n`,\n          \"--------------------------------\\n\",\n\n          CENTER,\n          NORMAL,\n          \"Thank you for your payment!\\n\\n\",\n          CENTER,\n          \"Keep this receipt for future reference\\n\",\n          \"\\n\\n\\n\",\n          CUT,\n        ].join(\"\");\n\n        const encoder = new TextEncoder();\n        const data = encoder.encode(receiptContent);\n\n        const CHUNK_SIZE = 50;\n        for (let i = 0; i < data.length; i += CHUNK_SIZE) {\n          const chunk = data.slice(i, i + CHUNK_SIZE);\n          await this.printer.characteristic.writeValue(chunk);\n          await new Promise((resolve) => setTimeout(resolve, 50));\n        }\n\n        return true;\n      } catch (error) {\n        console.error(\"Print error:\", error);\n        return false;\n      }\n    },\n\n    cancel() {\n      if (\n        confirm(\n          \"Are you sure you want to cancel? Any unsaved changes will be lost.\"\n        )\n      ) {\n        this.$router.push({\n          name:\n            this.$route.query.newConsumer === \"true\"\n              ? \"ConsumerRecords\"\n              : \"Billing\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-card {\n  border-radius: 8px;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Payments.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Payments.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Payments.vue?vue&type=template&id=1781ba86&scoped=true\"\nimport script from \"./Payments.vue?vue&type=script&lang=js\"\nexport * from \"./Payments.vue?vue&type=script&lang=js\"\nimport style0 from \"./Payments.vue?vue&type=style&index=0&id=1781ba86&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1781ba86\",\n  null\n  \n)\n\nexport default component.exports"],"names":["Vue","extend","name","directives","ripple","props","type","Boolean","Object","default","methods","genRipple","data","this","staticClass","push","value","center","$createElement","prevent","e","preventDefault","mixins","VInput","Rippleable","Comparable","model","prop","event","id","String","inputValue","falseValue","trueValue","multiple","label","hasColor","lazyValue","computed","computedColor","isActive","color","isDark","appIsDark","isMultiple","Array","isArray","internalValue","input","some","item","valueComparator","undefined","isDirty","rippleState","isDisabled","validationState","watch","val","genLabel","options","call","on","click","genInput","attrs","assign","toString","disabled","computedId","role","domProps","checked","blur","onBlur","change","onChange","focus","onFocus","keydown","onKeydown","ref","onClick","$emit","isInteractive","length","filter","validate","isFocused","Selectable","indeterminate","indeterminateIcon","offIcon","onIcon","inputIndeterminate","classes","computedIcon","hasError","shouldValidate","hasSuccess","$nextTick","genCheckbox","title","checkboxAttrs","attrs$","VIcon","setTextColor","dense","dark","light","genDefaultSlot","_v","_c","_vm","consumer","accountNo","index","fee","callback","$$v","$set","expression","amountReceivedError","amountReceived","totalAmountDue","toFixed","processPayment","loading","cancel","key","fn","snackbarText","showReceiptDialog","staticRenderFns","payment","print","snackbarColor","scopedSlots","render","snackbar","dialog","get","set","formatDate","date","Date","toLocaleString","year","month","day","hour","minute","second","generateReceiptNumber","timestamp","getTime","$parent","printReceipt","setTimeout","close","$router","params","refreshData","error","console","component","components","ReceiptPrintDialog","status","fees","amount","selected","description","paymentType","printer","device","characteristic","isConnected","receiptData","mapState","displayedFees","$route","query","new","displayFees","unpaidBalanceFee","find","f","toLowerCase","reconnectionFee","summaryItems","map","billId","billIds","reduce","total","calculateChange","isValidPayment","parseFloat","created","initializePaymentData","mapActions","ensurePrinterConnection","initializePrinter","navigator","bluetooth","requestDevice","filters","services","namePrefix","server","gatt","connect","service","getPrimaryService","getCharacteristic","addEventListener","consumerData","firstName","lastName","consumerType","membershipFee","bill","fetchBillById","fetchConsumerById","consumerId","currentBillFee","_id","unpaidBills","fetchUnpaidBills","previousBalanceBills","b","previousBalance","previousBalanceFee","isNewMember","paymentData","selectedFees","paymentMethod","notes","join","$store","dispatch","items","totalAmount","message","ESC","GS","CENTER","LEFT","BOLD","NORMAL","INIT","CUT","receiptContent","toLocaleDateString","toLocaleTimeString","padEnd","encoder","TextEncoder","encode","CHUNK_SIZE","i","chunk","slice","writeValue","Promise","resolve","confirm","newConsumer"],"sourceRoot":""}