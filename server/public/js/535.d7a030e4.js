"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[535],{3376:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var i=s(4112),a=s(6103),n=s(5595),r=s(7314),o=s(3698),l=s(2938),d=s(3180),c=s(4414),u=s(3449),g=s(9483),h=s(174),m=s(6930),p=s(7296),v=s(2659),f=s(3138),w=s(8519),C=s(2756),_=s(4312),b=s(7150),R=s(1034),y=s(7112),k=s(6513),A=function(){var e=this,t=e._self._c;return t(u.A,{staticClass:"px-2"},[t("div",{staticClass:"mb-4"},["meter_reader"!==e.userRole?t(a.A,{staticClass:"pa-0",attrs:{items:e.breadcrumbs,divider:"/"},scopedSlots:e._u([{key:"item",fn:function({item:s}){return[t(n.A,{staticClass:"subtitle-2",attrs:{href:s.href,disabled:s.disabled}},[e._v(" "+e._s(s.text)+" ")])]}}],null,!1,3389829953)}):e._e(),t("div",{staticClass:"d-flex flex-wrap align-center justify-space-between mb-2"},[t("h1",{staticClass:"text-h5 primary--text font-weight-bold"}),t(d.A,{staticClass:"ml-2",attrs:{color:"primary",small:""}},[t(m.A,{attrs:{left:"","x-small":""}},[e._v("mdi-clock-outline")]),e._v(" "+e._s(e.getPendingReadingsCount)+" Pending ")],1)],1)],1),t(o.A,{staticClass:"mb-3",attrs:{outlined:""}},[t(l.OQ,{staticClass:"py-2"},[t(C.A,{attrs:{align:"center","no-gutters":""}},[t(c.A,{staticClass:"pr-sm-3",attrs:{cols:"12",sm:"4"}},[t(_.A,{staticClass:"billing-period-select",attrs:{items:e.billingPeriods,dense:"",outlined:"","hide-details":"",label:"Billing Period"},model:{value:e.selectedBillingPeriod,callback:function(t){e.selectedBillingPeriod=t},expression:"selectedBillingPeriod"}})],1),t(c.A,{staticClass:"mt-3 mt-sm-0",attrs:{cols:"12",sm:"8"}},[t(C.A,{attrs:{"no-gutters":""}},[t(c.A,{attrs:{cols:"4"}},[t("div",{staticClass:"text-center stat-box"},[t("div",{staticClass:"overline"},[e._v("Total")]),t("div",{staticClass:"text-h6"},[e._v(e._s(e.getTotalConsumers))])])]),t(c.A,{attrs:{cols:"4"}},[t("div",{staticClass:"text-center stat-box"},[t("div",{staticClass:"overline"},[e._v("Completed")]),t("div",{staticClass:"text-h6 success--text"},[e._v(" "+e._s(e.getCompletedReadings)+" ")])])]),t(c.A,{attrs:{cols:"4"}},[t("div",{staticClass:"text-center stat-box"},[t("div",{staticClass:"overline"},[e._v("Pending")]),t("div",{staticClass:"text-h6 error--text"},[e._v(" "+e._s(e.getPendingReadingsCount)+" ")])])])],1)],1)],1)],1)],1),t(o.A,{staticClass:"mb-3",attrs:{outlined:""}},[t(l.OQ,{staticClass:"py-2"},[t(y.A,{attrs:{label:"Search Account Number",dense:"",outlined:"","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchConsumer.apply(null,arguments)}},scopedSlots:e._u([{key:"append",fn:function(){return[t(r.A,{staticClass:"mb-2",attrs:{color:"primary",loading:e.loading,small:""},on:{click:e.searchConsumer}},[e._v(" Search ")])]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e.selectedConsumer?[t(o.A,{staticClass:"mb-3",attrs:{outlined:""}},[t(l.OQ,{staticClass:"pt-3"},[t("div",{staticClass:"d-flex align-center mb-3"},[t("div",{staticClass:"d-flex align-center flex-grow-1"},[t(i.A,{staticClass:"mr-3",attrs:{color:"primary lighten-4",size:"40"}},[t(m.A,{attrs:{color:"primary"}},[e._v("mdi-account")])],1),t("div",[t("div",{staticClass:"text-subtitle-1 font-weight-medium"},[e._v(" "+e._s(e.selectedConsumer.firstName)+" "+e._s(e.selectedConsumer.lastName)+" ")]),t("div",{staticClass:"caption grey--text"},[e._v(" Account: "+e._s(e.selectedConsumer.accountNo)+" ")])])],1),t("div",{staticClass:"d-flex align-center"},[t(d.A,{staticClass:"mr-2",attrs:{color:e.getStatusColor(e.selectedConsumer.status),"x-small":"",label:""}},[e._v(" "+e._s(e.selectedConsumer.status)+" ")]),t("div",{staticClass:"caption grey--text"},[e._v(" "+e._s(e.isEditing?"Editing Reading":"New Reading")+" ")])],1)]),t("div",{staticClass:"mb-4"},[t("div",{staticClass:"caption grey--text"},[e._v("Address")]),t("div",{staticClass:"body-2"},[e._v(e._s(e.selectedConsumer.address))])]),t(o.A,{staticClass:"mb-4 grey lighten-5",attrs:{outlined:""}},[t(l.OQ,[t("div",{staticClass:"d-flex justify-space-between"},[t("div",[t("div",{staticClass:"caption grey--text"},[e._v("Previous Reading")]),t("div",{staticClass:"text-h6"},[e._v(e._s(e.getPreviousReading)+" m³")])]),t("div",{staticClass:"text-right"},[t("div",{staticClass:"caption grey--text"},[e._v("Date")]),t("div",{staticClass:"body-2"},[e._v(e._s(e.formatDate(e.getLastReadingDate)))])])])])],1),t(h.A,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(y.A,{staticClass:"mb-3",attrs:{label:"Current Reading",type:"number",outlined:"",dense:"",rules:e.currentReadingRules,suffix:"m³",readonly:e.isReadOnly},on:{input:e.calculateConsumption},model:{value:e.newReading.currentReading,callback:function(t){e.$set(e.newReading,"currentReading",e._n(t))},expression:"newReading.currentReading"}}),t(o.A,{staticClass:"text-center mb-3 py-2",attrs:{outlined:""}},[t("div",{staticClass:"caption grey--text"},[e._v("Consumption")]),t("div",{staticClass:"text-h5 primary--text font-weight-medium"},[e._v(" "+e._s(e.newReading.consumption)+" m³ ")])]),t(k.A,{staticClass:"mb-3",attrs:{label:"Remarks",outlined:"",dense:"",rows:"2",placeholder:"Add notes here...",readonly:e.isReadOnly},model:{value:e.newReading.remarks,callback:function(t){e.$set(e.newReading,"remarks",t)},expression:"newReading.remarks"}})],1)],1),t(g.A),t(l.SL,{staticClass:"pa-3"},[t(r.A,{attrs:{text:""},on:{click:e.clearSelectedConsumer}},[t(m.A,{attrs:{left:""}},[e._v("mdi-arrow-left")]),e._v(" Back ")],1),t(R.A),e.isEditing&&!e.isReadOnly?[t(r.A,{attrs:{color:"primary",disabled:!e.valid,loading:e.saving},on:{click:e.saveReading}},[t(m.A,{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Update Reading ")],1)]:e.isReadOnly?[t(r.A,{attrs:{text:""},on:{click:e.clearSelectedConsumer}},[t(m.A,{attrs:{left:""}},[e._v("mdi-close")]),e._v(" Close ")],1)]:[t(r.A,{attrs:{color:"primary",disabled:!e.valid,loading:e.saving},on:{click:e.saveReading}},[t(m.A,{attrs:{left:""}},[e._v("mdi-content-save")]),e._v(" Save Reading ")],1)]],2)],1)]:t(o.A,{attrs:{outlined:""}},e._l(e.getPendingReadings,(function(s){return t(p.A,{key:s._id,staticClass:"reading-list-item"},[t(f.A,[t(i.A,{attrs:{color:"primary lighten-4"}},[t(m.A,{attrs:{color:"primary"}},[e._v("mdi-account")])],1)],1),t(w.pr,[t("div",{staticClass:"d-flex align-center"},[t(w.UZ,{staticClass:"font-weight-medium"},[e._v(" "+e._s(s.firstName)+" "+e._s(s.lastName)+" ")]),t(d.A,{staticClass:"ml-2",attrs:{color:"completed"===s.readingStatus?"success":"warning","x-small":"",label:""}},[e._v(" "+e._s(s.readingStatus)+" ")])],1),t(w.w,{staticClass:"caption"},[e._v(" "+e._s(s.accountNo)+" · "+e._s(s.fullAddress)+" ")])],1),t(v.A,{staticClass:"d-flex align-center"},["completed"===s.readingStatus&&s.hasNewerReading?t(r.A,{staticClass:"mr-2",attrs:{icon:"",small:"",color:"grey"},on:{click:function(t){return t.stopPropagation(),e.viewReading(s)}}},[t(m.A,{attrs:{"x-small":""}},[e._v("mdi-eye")])],1):e._e(),"completed"!==s.readingStatus||s.hasNewerReading?e._e():t(r.A,{staticClass:"mr-2",attrs:{icon:"",small:"",color:"primary"},on:{click:function(t){return t.stopPropagation(),e.editReading(s)}}},[t(m.A,{attrs:{"x-small":""}},[e._v("mdi-pencil")])],1),"pending"===s.readingStatus?t(r.A,{attrs:{icon:"",small:""},on:{click:function(t){return t.stopPropagation(),e.selectConsumer(s)}}},[t(m.A,{attrs:{color:"grey"}},[e._v("mdi-chevron-right")])],1):e._e()],1)],1)})),1),t(b.A,{attrs:{color:e.snackbarColor,timeout:3e3,bottom:""},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(r.A,e._b({attrs:{text:"",small:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+"content> ")])],2)},D=[],x=(s(4114),s(8111),s(2489),s(116),s(1701),s(3579),s(5353)),B={name:"MeterReading",data:()=>({breadcrumbs:[{text:"Home",disabled:!1,href:"/"},{text:"Billing",disabled:!1,href:"/billing"},{text:"Meter Reading",disabled:!0}],billingPeriods:[],selectedBillingPeriod:"February 2025",search:"",selectedConsumer:null,valid:!1,snackbar:!1,snackbarText:"",snackbarColor:"",saving:!1,isEditing:!1,originalReading:null,newReading:{_id:null,consumerId:null,currentReading:null,consumption:0,remarks:"",readingDate:(new Date).toISOString().substr(0,10)}}),computed:{...(0,x.aH)("consumers",["consumers"]),...(0,x.aH)("readings",["readings","loading"]),userRole(){return this.$store.state.auth.user?.role},isReadOnly(){if(!this.selectedConsumer)return!0;const e=new Date(this.selectedBillingPeriod),t=this.readings.filter((e=>e.consumerId._id===this.selectedConsumer._id)).sort(((e,t)=>new Date(t.readingDate)-new Date(e.readingDate)));if(0===t.length)return!1;const s=t.find((t=>{const s=new Date(t.readingDate);return s.getFullYear()===e.getFullYear()&&s.getMonth()===e.getMonth()}));if(!s)return!1;const i=t.some((t=>{const s=new Date(t.readingDate);return s.getFullYear()>e.getFullYear()||s.getFullYear()===e.getFullYear()&&s.getMonth()>e.getMonth()}));return i},currentReadingRules(){return[e=>!!e||"Reading is required",e=>e>0||"Reading must be greater than 0",e=>{if(!this.selectedConsumer)return!0;const t=this.getPreviousReading;return e>t||`Must be higher than previous reading (${t})`}]},getTotalConsumers(){return this.consumers.length},getPendingReadings(){const e=new Date(this.selectedBillingPeriod).getMonth(),t=new Date(this.selectedBillingPeriod).getFullYear(),s=(new Date(this.selectedBillingPeriod),new Date(t,e+1,0));return this.consumers.map((i=>{const a=this.readings.find((s=>{const a=new Date(s.readingDate);return s.consumerId._id===i._id&&a.getMonth()===e&&a.getFullYear()===t})),n=this.readings.some((e=>{const t=new Date(e.readingDate);return e.consumerId._id===i._id&&t.getTime()>s.getTime()}));return{...i,readingStatus:a?"completed":"pending",hasNewerReading:n}}))},getPendingConsumers(){const e=new Date(this.selectedBillingPeriod).getMonth(),t=new Date(this.selectedBillingPeriod).getFullYear();return this.consumers.filter((s=>{const i=this.readings.some((i=>{const a=new Date(i.readingDate);return i.consumerId===s._id&&a.getMonth()===e&&a.getFullYear()===t}));return!i}))},getPendingReadingsCount(){return this.getPendingReadings.filter((e=>"pending"===e.readingStatus)).length},getCompletedReadings(){return this.getPendingReadings.filter((e=>"completed"===e.readingStatus)).length},getPreviousReading(){if(!this.selectedConsumer)return 0;const e=new Date(this.selectedBillingPeriod),t=this.readings.filter((t=>{const s=new Date(t.readingDate);return t.consumerId._id===this.selectedConsumer._id&&s<new Date(e.getFullYear(),e.getMonth(),1)})).sort(((e,t)=>new Date(t.readingDate)-new Date(e.readingDate)));return this.isEditing?this.originalReading?.previousReading||0:t[0]?.currentReading||0},getLastReadingDate(){if(!this.selectedConsumer)return null;const e=new Date(this.selectedBillingPeriod),t=this.readings.filter((t=>{const s=new Date(t.readingDate);return t.consumerId._id===this.selectedConsumer._id&&s<new Date(e.getFullYear(),e.getMonth(),1)})).sort(((e,t)=>new Date(t.readingDate)-new Date(e.readingDate)));return t[0]?.readingDate||null}},methods:{...(0,x.i0)("consumers",["fetchConsumers"]),...(0,x.i0)("readings",["fetchReadings","createReading","updateReading"]),generateBillingPeriods(){const e=[],t=new Date,s=t.getFullYear(),i=t.getMonth(),a=["January","February","March","April","May","June","July","August","September","October","November","December"];a.forEach(((t,a)=>{a>=i&&e.push(`${t} ${s}`)})),this.billingPeriods=e,this.selectedBillingPeriod||(this.selectedBillingPeriod=`${a[i]} ${s}`)},getReadingStatusColor(e){return{completed:"success",pending:"warning"}[e]||"grey"},async searchConsumer(){const e=this.consumers.find((e=>e.accountNo===this.search));e?this.selectConsumer(e):this.showSnackbar("Consumer not found","error")},hasExistingReading(e){const t=new Date(this.selectedBillingPeriod).getMonth();return this.readings.some((s=>s.consumerId===e._id&&new Date(s.readingDate).getMonth()===t))},async editReading(e){this.isEditing=!0,this.selectedConsumer=e;const t=new Date(this.selectedBillingPeriod).getMonth(),s=new Date(this.selectedBillingPeriod).getFullYear(),i=this.readings.find((i=>{const a=new Date(i.readingDate);return i.consumerId._id===e._id&&a.getMonth()===t&&a.getFullYear()===s}));i&&(console.log("Found reading:",i),this.originalReading={...i},this.newReading={_id:i._id,consumerId:i.consumerId._id,currentReading:i.currentReading,consumption:i.consumption,remarks:i.remarks||"",readingDate:i.readingDate}),console.log("isEditing:",this.isEditing),console.log("isReadOnly:",this.isReadOnly),this.$nextTick((()=>{this.$refs.form&&this.$refs.form.resetValidation()}))},selectConsumer(e){const t=new Date(this.selectedBillingPeriod).getMonth(),s=this.readings.some((s=>s.consumerId===e._id&&new Date(s.readingDate).getMonth()===t));this.selectedConsumer={...e,readingStatus:s?"completed":"pending"},this.isEditing=!1,this.originalReading=null,this.newReading={consumerId:e._id,currentReading:null,consumption:0,remarks:"",readingDate:(new Date).toISOString().substr(0,10)}},viewReading(e){this.isEditing=!1,this.selectedConsumer=e;const t=new Date(this.selectedBillingPeriod).getMonth(),s=new Date(this.selectedBillingPeriod).getFullYear(),i=this.readings.find((i=>{const a=new Date(i.readingDate);return i.consumerId._id===e._id&&a.getMonth()===t&&a.getFullYear()===s}));i&&(this.newReading={_id:i._id,consumerId:i.consumerId._id,currentReading:i.currentReading,consumption:i.consumption,remarks:i.remarks||"",readingDate:i.readingDate}),this.$nextTick((()=>{this.$refs.form&&this.$refs.form.resetValidation()}))},clearSelectedConsumer(){this.selectedConsumer=null,this.newReading={currentReading:null,consumption:0,remarks:""},this.search="",this.isEditing=!1,this.originalReading=null},calculateConsumption(){this.newReading.currentReading&&this.selectedConsumer&&(this.newReading.consumption=this.newReading.currentReading-this.getPreviousReading)},getStatusColor(e){return{active:"success",inactive:"grey",delinquent:"error"}[e]||"grey"},async saveReading(){if(this.$refs.form.validate()){this.saving=!0;try{const e=(new Date).getDate(),t=new Date(this.selectedBillingPeriod),s=new Date(t.getFullYear(),t.getMonth(),e),i={...this.newReading,previousReading:this.getPreviousReading,readingDate:s.toISOString(),status:"completed",consumerId:this.selectedConsumer._id};this.isEditing?(await this.updateReading({id:this.newReading._id,readingData:i}),this.showSnackbar("Reading updated successfully","success")):(await this.createReading(i),this.showSnackbar("Reading saved successfully","success")),this.clearSelectedConsumer(),await this.fetchReadings()}catch(e){this.showSnackbar(e.message||`Error ${this.isEditing?"updating":"saving"} reading`,"error")}finally{this.saving=!1}}},showSnackbar(e,t){this.snackbarText=e,this.snackbarColor=t,this.snackbar=!0},formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No previous reading"}},async created(){this.generateBillingPeriods();try{await Promise.all([this.fetchConsumers(),this.fetchReadings()])}catch(e){this.showSnackbar("Error loading data","error")}},watch:{selectedBillingPeriod:{handler(){this.fetchReadings()}}}},P=B,S=s(1656),$=(0,S.A)(P,A,D,!1,null,"cf300a3e",null),I=$.exports},174:function(e,t,s){s(4114),s(8111),s(2489),s(116),s(7588);var i=s(5803),a=s(7717),n=s(7540),r=s(4152);t.A=(0,i.A)(a.A,(0,n.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",(t=>{this.$set(this.errorBag,e._uid,t)}),{immediate:!0}),s={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=e.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(e._uid)||(s.valid=t(e)))})):s.valid=t(e),s},validate(){return 0===this.inputs.filter((e=>!e.validate(!0))).length},reset(){this.inputs.forEach((e=>e.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((e=>e.resetValidation())),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find((t=>t._uid===e._uid));if(!t)return;const s=this.watchers.find((e=>e._uid===t._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((e=>e._uid!==t._uid)),this.inputs=this.inputs.filter((e=>e._uid!==t._uid)),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},(0,r.$c)(this))}})},1034:function(e,t,s){s(8568);var i=s(4152);t.A=(0,i.Gn)("spacer","div","v-spacer")},7150:function(e,t,s){s.d(t,{A:function(){return u}});var i=s(8184),a=s(8743),n=s(3381),r=s(428),o=s(6763),l=s(5803),d=s(4152),c=s(6988),u=(0,l.A)(i.A,a.A,r.A,(0,o.P)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:e=>"string"===typeof e||!1===e},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:n.A.options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:e,bottom:t,footer:s,insetFooter:i,left:a,right:n,top:r}=this.$vuetify.application;return{paddingBottom:(0,d.Dg)(t+s+i),paddingLeft:(0,d.Dg)(a),paddingRight:(0,d.Dg)(n),paddingTop:(0,d.Dg)(e+r)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&(0,c.rq)("auto-height",this),0==this.timeout&&(0,c.CI)('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,d.$c)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[(0,d.$c)(this)])},genWrapper(){const e=this.hasBackground?this.setBackgroundColor:this.setTextColor,t=e(this.color,{staticClass:"v-snack__wrapper",class:i.A.options.computed.classes.call(this),style:i.A.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",t,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((()=>{this.isActive=!1}),e))}},render(e){return e("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},6513:function(e,t,s){s.d(t,{A:function(){return r}});var i=s(7112),a=s(5803);const n=(0,a.A)(i.A);var r=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...i.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(s,t)+"px"},genInput(){const e=i.A.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){i.A.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})}}]);
//# sourceMappingURL=535.d7a030e4.js.map