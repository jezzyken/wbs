{"version":3,"file":"js/535.d7a030e4.js","mappings":"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","sources":["webpack://client/./src/views/admin/Readings.vue","webpack://client/src/views/admin/Readings.vue","webpack://client/./src/views/admin/Readings.vue?93b9","webpack://client/./src/views/admin/Readings.vue?8036","webpack://client/../../../src/components/VForm/VForm.ts","webpack://client/../../../src/components/VGrid/VSpacer.ts","webpack://client/../../../src/components/VSnackbar/VSnackbar.ts","webpack://client/../../../src/components/VTextarea/VTextarea.ts"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{staticClass:\"px-2\"},[_c('div',{staticClass:\"mb-4\"},[(_vm.userRole !== 'meter_reader')?_c('v-breadcrumbs',{staticClass:\"pa-0\",attrs:{\"items\":_vm.breadcrumbs,\"divider\":\"/\"},scopedSlots:_vm._u([{key:\"item\",fn:function({ item }){return [_c('v-breadcrumbs-item',{staticClass:\"subtitle-2\",attrs:{\"href\":item.href,\"disabled\":item.disabled}},[_vm._v(\" \"+_vm._s(item.text)+\" \")])]}}],null,false,3389829953)}):_vm._e(),_c('div',{staticClass:\"d-flex flex-wrap align-center justify-space-between mb-2\"},[_c('h1',{staticClass:\"text-h5 primary--text font-weight-bold\"}),_c('v-chip',{staticClass:\"ml-2\",attrs:{\"color\":\"primary\",\"small\":\"\"}},[_c('v-icon',{attrs:{\"left\":\"\",\"x-small\":\"\"}},[_vm._v(\"mdi-clock-outline\")]),_vm._v(\" \"+_vm._s(_vm.getPendingReadingsCount)+\" Pending \")],1)],1)],1),_c('v-card',{staticClass:\"mb-3\",attrs:{\"outlined\":\"\"}},[_c('v-card-text',{staticClass:\"py-2\"},[_c('v-row',{attrs:{\"align\":\"center\",\"no-gutters\":\"\"}},[_c('v-col',{staticClass:\"pr-sm-3\",attrs:{\"cols\":\"12\",\"sm\":\"4\"}},[_c('v-select',{staticClass:\"billing-period-select\",attrs:{\"items\":_vm.billingPeriods,\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"label\":\"Billing Period\"},model:{value:(_vm.selectedBillingPeriod),callback:function ($$v) {_vm.selectedBillingPeriod=$$v},expression:\"selectedBillingPeriod\"}})],1),_c('v-col',{staticClass:\"mt-3 mt-sm-0\",attrs:{\"cols\":\"12\",\"sm\":\"8\"}},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('div',{staticClass:\"text-center stat-box\"},[_c('div',{staticClass:\"overline\"},[_vm._v(\"Total\")]),_c('div',{staticClass:\"text-h6\"},[_vm._v(_vm._s(_vm.getTotalConsumers))])])]),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('div',{staticClass:\"text-center stat-box\"},[_c('div',{staticClass:\"overline\"},[_vm._v(\"Completed\")]),_c('div',{staticClass:\"text-h6 success--text\"},[_vm._v(\" \"+_vm._s(_vm.getCompletedReadings)+\" \")])])]),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('div',{staticClass:\"text-center stat-box\"},[_c('div',{staticClass:\"overline\"},[_vm._v(\"Pending\")]),_c('div',{staticClass:\"text-h6 error--text\"},[_vm._v(\" \"+_vm._s(_vm.getPendingReadingsCount)+\" \")])])])],1)],1)],1)],1)],1),_c('v-card',{staticClass:\"mb-3\",attrs:{\"outlined\":\"\"}},[_c('v-card-text',{staticClass:\"py-2\"},[_c('v-text-field',{attrs:{\"label\":\"Search Account Number\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"clearable\":\"\",\"prepend-inner-icon\":\"mdi-magnify\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.searchConsumer.apply(null, arguments)}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-btn',{staticClass:\"mb-2\",attrs:{\"color\":\"primary\",\"loading\":_vm.loading,\"small\":\"\"},on:{\"click\":_vm.searchConsumer}},[_vm._v(\" Search \")])]},proxy:true}]),model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],1),(_vm.selectedConsumer)?[_c('v-card',{staticClass:\"mb-3\",attrs:{\"outlined\":\"\"}},[_c('v-card-text',{staticClass:\"pt-3\"},[_c('div',{staticClass:\"d-flex align-center mb-3\"},[_c('div',{staticClass:\"d-flex align-center flex-grow-1\"},[_c('v-avatar',{staticClass:\"mr-3\",attrs:{\"color\":\"primary lighten-4\",\"size\":\"40\"}},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-account\")])],1),_c('div',[_c('div',{staticClass:\"text-subtitle-1 font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.selectedConsumer.firstName)+\" \"+_vm._s(_vm.selectedConsumer.lastName)+\" \")]),_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\" Account: \"+_vm._s(_vm.selectedConsumer.accountNo)+\" \")])])],1),_c('div',{staticClass:\"d-flex align-center\"},[_c('v-chip',{staticClass:\"mr-2\",attrs:{\"color\":_vm.getStatusColor(_vm.selectedConsumer.status),\"x-small\":\"\",\"label\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.selectedConsumer.status)+\" \")]),_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\" \"+_vm._s(_vm.isEditing ? \"Editing Reading\" : \"New Reading\")+\" \")])],1)]),_c('div',{staticClass:\"mb-4\"},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Address\")]),_c('div',{staticClass:\"body-2\"},[_vm._v(_vm._s(_vm.selectedConsumer.address))])]),_c('v-card',{staticClass:\"mb-4 grey lighten-5\",attrs:{\"outlined\":\"\"}},[_c('v-card-text',[_c('div',{staticClass:\"d-flex justify-space-between\"},[_c('div',[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Previous Reading\")]),_c('div',{staticClass:\"text-h6\"},[_vm._v(_vm._s(_vm.getPreviousReading)+\" m³\")])]),_c('div',{staticClass:\"text-right\"},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Date\")]),_c('div',{staticClass:\"body-2\"},[_vm._v(_vm._s(_vm.formatDate(_vm.getLastReadingDate)))])])])])],1),_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{staticClass:\"mb-3\",attrs:{\"label\":\"Current Reading\",\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\",\"rules\":_vm.currentReadingRules,\"suffix\":\"m³\",\"readonly\":_vm.isReadOnly},on:{\"input\":_vm.calculateConsumption},model:{value:(_vm.newReading.currentReading),callback:function ($$v) {_vm.$set(_vm.newReading, \"currentReading\", _vm._n($$v))},expression:\"newReading.currentReading\"}}),_c('v-card',{staticClass:\"text-center mb-3 py-2\",attrs:{\"outlined\":\"\"}},[_c('div',{staticClass:\"caption grey--text\"},[_vm._v(\"Consumption\")]),_c('div',{staticClass:\"text-h5 primary--text font-weight-medium\"},[_vm._v(\" \"+_vm._s(_vm.newReading.consumption)+\" m³ \")])]),_c('v-textarea',{staticClass:\"mb-3\",attrs:{\"label\":\"Remarks\",\"outlined\":\"\",\"dense\":\"\",\"rows\":\"2\",\"placeholder\":\"Add notes here...\",\"readonly\":_vm.isReadOnly},model:{value:(_vm.newReading.remarks),callback:function ($$v) {_vm.$set(_vm.newReading, \"remarks\", $$v)},expression:\"newReading.remarks\"}})],1)],1),_c('v-divider'),_c('v-card-actions',{staticClass:\"pa-3\"},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.clearSelectedConsumer}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-arrow-left\")]),_vm._v(\" Back \")],1),_c('v-spacer'),(_vm.isEditing && !_vm.isReadOnly)?[_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.valid,\"loading\":_vm.saving},on:{\"click\":_vm.saveReading}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-content-save\")]),_vm._v(\" Update Reading \")],1)]:(_vm.isReadOnly)?[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.clearSelectedConsumer}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close\")]),_vm._v(\" Close \")],1)]:[_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.valid,\"loading\":_vm.saving},on:{\"click\":_vm.saveReading}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-content-save\")]),_vm._v(\" Save Reading \")],1)]],2)],1)]:_c('v-card',{attrs:{\"outlined\":\"\"}},_vm._l((_vm.getPendingReadings),function(consumer){return _c('v-list-item',{key:consumer._id,staticClass:\"reading-list-item\"},[_c('v-list-item-avatar',[_c('v-avatar',{attrs:{\"color\":\"primary lighten-4\"}},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-account\")])],1)],1),_c('v-list-item-content',[_c('div',{staticClass:\"d-flex align-center\"},[_c('v-list-item-title',{staticClass:\"font-weight-medium\"},[_vm._v(\" \"+_vm._s(consumer.firstName)+\" \"+_vm._s(consumer.lastName)+\" \")]),_c('v-chip',{staticClass:\"ml-2\",attrs:{\"color\":consumer.readingStatus === 'completed' ? 'success' : 'warning',\"x-small\":\"\",\"label\":\"\"}},[_vm._v(\" \"+_vm._s(consumer.readingStatus)+\" \")])],1),_c('v-list-item-subtitle',{staticClass:\"caption\"},[_vm._v(\" \"+_vm._s(consumer.accountNo)+\" · \"+_vm._s(consumer.fullAddress)+\" \")])],1),_c('v-list-item-action',{staticClass:\"d-flex align-center\"},[(\n            consumer.readingStatus === 'completed' && consumer.hasNewerReading\n          )?_c('v-btn',{staticClass:\"mr-2\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"grey\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.viewReading(consumer)}}},[_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"mdi-eye\")])],1):_vm._e(),(\n            consumer.readingStatus === 'completed' &&\n            !consumer.hasNewerReading\n          )?_c('v-btn',{staticClass:\"mr-2\",attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.editReading(consumer)}}},[_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"mdi-pencil\")])],1):_vm._e(),(consumer.readingStatus === 'pending')?_c('v-btn',{attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectConsumer(consumer)}}},[_c('v-icon',{attrs:{\"color\":\"grey\"}},[_vm._v(\"mdi-chevron-right\")])],1):_vm._e()],1)],1)}),1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":3000,\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\" Close \")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\"content> \")])],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"px-2\">\n    <div class=\"mb-4\">\n      <v-breadcrumbs\n        :items=\"breadcrumbs\"\n        divider=\"/\"\n        class=\"pa-0\"\n        v-if=\"userRole !== 'meter_reader'\"\n      >\n        <template v-slot:item=\"{ item }\">\n          <v-breadcrumbs-item\n            :href=\"item.href\"\n            :disabled=\"item.disabled\"\n            class=\"subtitle-2\"\n          >\n            {{ item.text }}\n          </v-breadcrumbs-item>\n        </template>\n      </v-breadcrumbs>\n\n      <div class=\"d-flex flex-wrap align-center justify-space-between mb-2\">\n        <h1 class=\"text-h5 primary--text font-weight-bold\"></h1>\n        <v-chip color=\"primary\" small class=\"ml-2\">\n          <v-icon left x-small>mdi-clock-outline</v-icon>\n          {{ getPendingReadingsCount }} Pending\n        </v-chip>\n      </div>\n    </div>\n\n    <v-card outlined class=\"mb-3\">\n      <v-card-text class=\"py-2\">\n        <v-row align=\"center\" no-gutters>\n          <v-col cols=\"12\" sm=\"4\" class=\"pr-sm-3\">\n            <v-select\n              v-model=\"selectedBillingPeriod\"\n              :items=\"billingPeriods\"\n              dense\n              outlined\n              hide-details\n              label=\"Billing Period\"\n              class=\"billing-period-select\"\n            ></v-select>\n          </v-col>\n          <v-col cols=\"12\" sm=\"8\" class=\"mt-3 mt-sm-0\">\n            <v-row no-gutters>\n              <v-col cols=\"4\">\n                <div class=\"text-center stat-box\">\n                  <div class=\"overline\">Total</div>\n                  <div class=\"text-h6\">{{ getTotalConsumers }}</div>\n                </div>\n              </v-col>\n              <v-col cols=\"4\">\n                <div class=\"text-center stat-box\">\n                  <div class=\"overline\">Completed</div>\n                  <div class=\"text-h6 success--text\">\n                    {{ getCompletedReadings }}\n                  </div>\n                </div>\n              </v-col>\n              <v-col cols=\"4\">\n                <div class=\"text-center stat-box\">\n                  <div class=\"overline\">Pending</div>\n                  <div class=\"text-h6 error--text\">\n                    {{ getPendingReadingsCount }}\n                  </div>\n                </div>\n              </v-col>\n            </v-row>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <v-card outlined class=\"mb-3\">\n      <v-card-text class=\"py-2\">\n        <v-text-field\n          v-model=\"search\"\n          label=\"Search Account Number\"\n          dense\n          outlined\n          hide-details\n          clearable\n          @keyup.enter=\"searchConsumer\"\n          prepend-inner-icon=\"mdi-magnify\"\n        >\n          <template v-slot:append>\n            <v-btn\n              color=\"primary\"\n              @click=\"searchConsumer\"\n              :loading=\"loading\"\n              small\n              class=\"mb-2\"\n            >\n              Search\n            </v-btn>\n          </template>\n        </v-text-field>\n      </v-card-text>\n    </v-card>\n\n    <template v-if=\"selectedConsumer\">\n      <v-card outlined class=\"mb-3\">\n        <v-card-text class=\"pt-3\">\n          <div class=\"d-flex align-center mb-3\">\n            <div class=\"d-flex align-center flex-grow-1\">\n              <v-avatar color=\"primary lighten-4\" size=\"40\" class=\"mr-3\">\n                <v-icon color=\"primary\">mdi-account</v-icon>\n              </v-avatar>\n              <div>\n                <div class=\"text-subtitle-1 font-weight-medium\">\n                  {{ selectedConsumer.firstName }}\n                  {{ selectedConsumer.lastName }}\n                </div>\n                <div class=\"caption grey--text\">\n                  Account: {{ selectedConsumer.accountNo }}\n                </div>\n              </div>\n            </div>\n            <div class=\"d-flex align-center\">\n              <v-chip\n                :color=\"getStatusColor(selectedConsumer.status)\"\n                x-small\n                label\n                class=\"mr-2\"\n              >\n                {{ selectedConsumer.status }}\n              </v-chip>\n              <div class=\"caption grey--text\">\n                {{ isEditing ? \"Editing Reading\" : \"New Reading\" }}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"mb-4\">\n            <div class=\"caption grey--text\">Address</div>\n            <div class=\"body-2\">{{ selectedConsumer.address }}</div>\n          </div>\n\n          <v-card outlined class=\"mb-4 grey lighten-5\">\n            <v-card-text>\n              <div class=\"d-flex justify-space-between\">\n                <div>\n                  <div class=\"caption grey--text\">Previous Reading</div>\n                  <div class=\"text-h6\">{{ getPreviousReading }} m³</div>\n                </div>\n                <div class=\"text-right\">\n                  <div class=\"caption grey--text\">Date</div>\n                  <div class=\"body-2\">{{ formatDate(getLastReadingDate) }}</div>\n                </div>\n              </div>\n            </v-card-text>\n          </v-card>\n          <v-form ref=\"form\" v-model=\"valid\">\n            <v-text-field\n              v-model.number=\"newReading.currentReading\"\n              label=\"Current Reading\"\n              type=\"number\"\n              outlined\n              dense\n              :rules=\"currentReadingRules\"\n              @input=\"calculateConsumption\"\n              suffix=\"m³\"\n              class=\"mb-3\"\n              :readonly=\"isReadOnly\"\n            ></v-text-field>\n\n            <v-card outlined class=\"text-center mb-3 py-2\">\n              <div class=\"caption grey--text\">Consumption</div>\n              <div class=\"text-h5 primary--text font-weight-medium\">\n                {{ newReading.consumption }} m³\n              </div>\n            </v-card>\n\n            <v-textarea\n              v-model=\"newReading.remarks\"\n              label=\"Remarks\"\n              outlined\n              dense\n              rows=\"2\"\n              placeholder=\"Add notes here...\"\n              class=\"mb-3\"\n              :readonly=\"isReadOnly\"\n            ></v-textarea>\n          </v-form>\n        </v-card-text>\n\n        <v-divider></v-divider>\n\n        <v-card-actions class=\"pa-3\">\n          <v-btn text @click=\"clearSelectedConsumer\">\n            <v-icon left>mdi-arrow-left</v-icon>\n            Back\n          </v-btn>\n          <v-spacer></v-spacer>\n\n          <template v-if=\"isEditing && !isReadOnly\">\n            <v-btn\n              color=\"primary\"\n              :disabled=\"!valid\"\n              @click=\"saveReading\"\n              :loading=\"saving\"\n            >\n              <v-icon left>mdi-content-save</v-icon>\n              Update Reading\n            </v-btn>\n          </template>\n\n          <template v-else-if=\"isReadOnly\">\n            <v-btn text @click=\"clearSelectedConsumer\">\n              <v-icon left>mdi-close</v-icon>\n              Close\n            </v-btn>\n          </template>\n\n          <template v-else>\n            <v-btn\n              color=\"primary\"\n              :disabled=\"!valid\"\n              @click=\"saveReading\"\n              :loading=\"saving\"\n            >\n              <v-icon left>mdi-content-save</v-icon>\n              Save Reading\n            </v-btn>\n          </template>\n        </v-card-actions>\n      </v-card>\n    </template>\n\n    <v-card v-else outlined>\n      <v-list-item\n        v-for=\"consumer in getPendingReadings\"\n        :key=\"consumer._id\"\n        class=\"reading-list-item\"\n      >\n        <v-list-item-avatar>\n          <v-avatar color=\"primary lighten-4\">\n            <v-icon color=\"primary\">mdi-account</v-icon>\n          </v-avatar>\n        </v-list-item-avatar>\n\n        <v-list-item-content>\n          <div class=\"d-flex align-center\">\n            <v-list-item-title class=\"font-weight-medium\">\n              {{ consumer.firstName }} {{ consumer.lastName }}\n            </v-list-item-title>\n            <v-chip\n              :color=\"\n                consumer.readingStatus === 'completed' ? 'success' : 'warning'\n              \"\n              x-small\n              label\n              class=\"ml-2\"\n            >\n              {{ consumer.readingStatus }}\n            </v-chip>\n          </div>\n          <v-list-item-subtitle class=\"caption\">\n            {{ consumer.accountNo }} · {{ consumer.fullAddress }}\n          </v-list-item-subtitle>\n        </v-list-item-content>\n\n        <v-list-item-action class=\"d-flex align-center\">\n          <v-btn\n            icon\n            small\n            class=\"mr-2\"\n            @click.stop=\"viewReading(consumer)\"\n            v-if=\"\n              consumer.readingStatus === 'completed' && consumer.hasNewerReading\n            \"\n            color=\"grey\"\n          >\n            <v-icon x-small>mdi-eye</v-icon>\n          </v-btn>\n\n          <v-btn\n            icon\n            small\n            class=\"mr-2\"\n            @click.stop=\"editReading(consumer)\"\n            v-if=\"\n              consumer.readingStatus === 'completed' &&\n              !consumer.hasNewerReading\n            \"\n            color=\"primary\"\n          >\n            <v-icon x-small>mdi-pencil</v-icon>\n          </v-btn>\n\n          <v-btn\n            icon\n            small\n            @click.stop=\"selectConsumer(consumer)\"\n            v-if=\"consumer.readingStatus === 'pending'\"\n          >\n            <v-icon color=\"grey\">mdi-chevron-right</v-icon>\n          </v-btn>\n        </v-list-item-action>\n      </v-list-item>\n    </v-card>\n\n    <v-snackbar\n      v-model=\"snackbar\"\n      :color=\"snackbarColor\"\n      :timeout=\"3000\"\n      bottom\n    >\n      {{ snackbarText }}content>\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn text small v-bind=\"attrs\" @click=\"snackbar = false\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  name: \"MeterReading\",\n\n  data: () => ({\n    breadcrumbs: [\n      {\n        text: \"Home\",\n        disabled: false,\n        href: \"/\",\n      },\n      {\n        text: \"Billing\",\n        disabled: false,\n        href: \"/billing\",\n      },\n      {\n        text: \"Meter Reading\",\n        disabled: true,\n      },\n    ],\n    billingPeriods: [],\n    selectedBillingPeriod: \"February 2025\",\n    search: \"\",\n    selectedConsumer: null,\n    valid: false,\n    snackbar: false,\n    snackbarText: \"\",\n    snackbarColor: \"\",\n    saving: false,\n    isEditing: false,\n    originalReading: null,\n\n    newReading: {\n      _id: null,\n      consumerId: null,\n      currentReading: null,\n      consumption: 0,\n      remarks: \"\",\n      readingDate: new Date().toISOString().substr(0, 10),\n    },\n  }),\n\n  computed: {\n    ...mapState(\"consumers\", [\"consumers\"]),\n    ...mapState(\"readings\", [\"readings\", \"loading\"]),\n\n    userRole() {\n      return this.$store.state.auth.user?.role;\n    },\n\n    isReadOnly() {\n      if (!this.selectedConsumer) return true;\n\n      const selectedPeriod = new Date(this.selectedBillingPeriod);\n\n      // Get all consumer readings sorted by date (newest first)\n      const consumerReadings = this.readings\n        .filter((r) => r.consumerId._id === this.selectedConsumer._id)\n        .sort((a, b) => new Date(b.readingDate) - new Date(a.readingDate));\n\n      // If no readings, then it's not read-only\n      if (consumerReadings.length === 0) return false;\n\n      // Get the reading for the selected period\n      const selectedPeriodReading = consumerReadings.find((reading) => {\n        const readingDate = new Date(reading.readingDate);\n        return (\n          readingDate.getFullYear() === selectedPeriod.getFullYear() &&\n          readingDate.getMonth() === selectedPeriod.getMonth()\n        );\n      });\n\n      // If no reading exists for selected period, it's editable\n      if (!selectedPeriodReading) return false;\n\n      // Check if there are any readings from future periods\n      const hasNewerReading = consumerReadings.some((reading) => {\n        const readingDate = new Date(reading.readingDate);\n        return (\n          readingDate.getFullYear() > selectedPeriod.getFullYear() ||\n          (readingDate.getFullYear() === selectedPeriod.getFullYear() &&\n            readingDate.getMonth() > selectedPeriod.getMonth())\n        );\n      });\n\n      // Return true (read-only) only if viewing an old reading that has newer readings\n      return hasNewerReading;\n    },\n    currentReadingRules() {\n      return [\n        (v) => !!v || \"Reading is required\",\n        (v) => v > 0 || \"Reading must be greater than 0\",\n        (v) => {\n          if (!this.selectedConsumer) return true;\n          const prevReading = this.getPreviousReading;\n          return (\n            v > prevReading ||\n            `Must be higher than previous reading (${prevReading})`\n          );\n        },\n      ];\n    },\n\n    getTotalConsumers() {\n      return this.consumers.length;\n    },\n\n    getPendingReadings() {\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      const currentYear = new Date(this.selectedBillingPeriod).getFullYear();\n      const selectedPeriod = new Date(this.selectedBillingPeriod);\n      // Get end of selected month\n      const endOfMonth = new Date(currentYear, currentMonth + 1, 0);\n\n      return this.consumers.map((consumer) => {\n        const reading = this.readings.find((r) => {\n          const readingDate = new Date(r.readingDate);\n          return (\n            r.consumerId._id === consumer._id &&\n            readingDate.getMonth() === currentMonth &&\n            readingDate.getFullYear() === currentYear\n          );\n        });\n\n        const hasNewerReading = this.readings.some((r) => {\n          const readingDate = new Date(r.readingDate);\n          return (\n            r.consumerId._id === consumer._id &&\n            readingDate.getTime() > endOfMonth.getTime()\n          );\n        });\n\n        return {\n          ...consumer,\n          readingStatus: reading ? \"completed\" : \"pending\",\n          hasNewerReading,\n        };\n      });\n    },\n    getPendingConsumers() {\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      const currentYear = new Date(this.selectedBillingPeriod).getFullYear();\n\n      return this.consumers.filter((consumer) => {\n        const hasReadingThisMonth = this.readings.some((reading) => {\n          const readingDate = new Date(reading.readingDate);\n          return (\n            reading.consumerId === consumer._id &&\n            readingDate.getMonth() === currentMonth &&\n            readingDate.getFullYear() === currentYear\n          );\n        });\n\n        return !hasReadingThisMonth;\n      });\n    },\n\n    getPendingReadingsCount() {\n      return this.getPendingReadings.filter(\n        (c) => c.readingStatus === \"pending\"\n      ).length;\n    },\n\n    getCompletedReadings() {\n      return this.getPendingReadings.filter(\n        (c) => c.readingStatus === \"completed\"\n      ).length;\n    },\n\n    getPreviousReading() {\n      if (!this.selectedConsumer) return 0;\n\n      const billingDate = new Date(this.selectedBillingPeriod);\n\n      const consumerReadings = this.readings\n        .filter((r) => {\n          const readingDate = new Date(r.readingDate);\n          return (\n            r.consumerId._id === this.selectedConsumer._id &&\n            readingDate <\n              new Date(billingDate.getFullYear(), billingDate.getMonth(), 1)\n          );\n        })\n        .sort((a, b) => new Date(b.readingDate) - new Date(a.readingDate));\n\n      return this.isEditing\n        ? this.originalReading?.previousReading || 0\n        : consumerReadings[0]?.currentReading || 0;\n    },\n\n    getLastReadingDate() {\n      if (!this.selectedConsumer) return null;\n\n      const billingDate = new Date(this.selectedBillingPeriod);\n\n      const consumerReadings = this.readings\n        .filter((r) => {\n          const readingDate = new Date(r.readingDate);\n          return (\n            r.consumerId._id === this.selectedConsumer._id &&\n            readingDate <\n              new Date(billingDate.getFullYear(), billingDate.getMonth(), 1)\n          );\n        })\n        .sort((a, b) => new Date(b.readingDate) - new Date(a.readingDate));\n\n      return consumerReadings[0]?.readingDate || null;\n    },\n  },\n\n  methods: {\n    ...mapActions(\"consumers\", [\"fetchConsumers\"]),\n    ...mapActions(\"readings\", [\n      \"fetchReadings\",\n      \"createReading\",\n      \"updateReading\",\n    ]),\n\n    generateBillingPeriods() {\n      const periods = [];\n      const currentDate = new Date();\n      const currentYear = currentDate.getFullYear();\n      const currentMonth = currentDate.getMonth();\n      const months = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\",\n      ];\n\n      months.forEach((month, index) => {\n        if (index >= currentMonth) {\n          periods.push(`${month} ${currentYear}`);\n        }\n      });\n\n      this.billingPeriods = periods;\n\n      if (!this.selectedBillingPeriod) {\n        this.selectedBillingPeriod = `${months[currentMonth]} ${currentYear}`;\n      }\n    },\n\n    getReadingStatusColor(status) {\n      return (\n        {\n          completed: \"success\",\n          pending: \"warning\",\n        }[status] || \"grey\"\n      );\n    },\n\n    async searchConsumer() {\n      const found = this.consumers.find((c) => c.accountNo === this.search);\n      if (found) {\n        this.selectConsumer(found);\n      } else {\n        this.showSnackbar(\"Consumer not found\", \"error\");\n      }\n    },\n\n    hasExistingReading(consumer) {\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      return this.readings.some(\n        (reading) =>\n          reading.consumerId === consumer._id &&\n          new Date(reading.readingDate).getMonth() === currentMonth\n      );\n    },\n\n    async editReading(consumer) {\n      this.isEditing = true; \n      this.selectedConsumer = consumer;\n\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      const currentYear = new Date(this.selectedBillingPeriod).getFullYear();\n\n      const reading = this.readings.find((r) => {\n        const readingDate = new Date(r.readingDate);\n        return (\n          r.consumerId._id === consumer._id &&\n          readingDate.getMonth() === currentMonth &&\n          readingDate.getFullYear() === currentYear\n        );\n      });\n\n      if (reading) {\n        console.log(\"Found reading:\", reading); \n        this.originalReading = { ...reading };\n        this.newReading = {\n          _id: reading._id,\n          consumerId: reading.consumerId._id,\n          currentReading: reading.currentReading,\n          consumption: reading.consumption,\n          remarks: reading.remarks || \"\",\n          readingDate: reading.readingDate,\n        };\n      }\n\n      // Add debug logs\n      console.log(\"isEditing:\", this.isEditing);\n      console.log(\"isReadOnly:\", this.isReadOnly);\n\n      this.$nextTick(() => {\n        if (this.$refs.form) {\n          this.$refs.form.resetValidation();\n        }\n      });\n    },\n\n    selectConsumer(consumer) {\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      const hasReadingThisMonth = this.readings.some(\n        (reading) =>\n          reading.consumerId === consumer._id &&\n          new Date(reading.readingDate).getMonth() === currentMonth\n      );\n\n      this.selectedConsumer = {\n        ...consumer,\n        readingStatus: hasReadingThisMonth ? \"completed\" : \"pending\",\n      };\n      this.isEditing = false;\n      this.originalReading = null;\n      this.newReading = {\n        consumerId: consumer._id,\n        currentReading: null,\n        consumption: 0,\n        remarks: \"\",\n        readingDate: new Date().toISOString().substr(0, 10),\n      };\n    },\n\n    viewReading(consumer) {\n      this.isEditing = false;\n      this.selectedConsumer = consumer;\n\n      const currentMonth = new Date(this.selectedBillingPeriod).getMonth();\n      const currentYear = new Date(this.selectedBillingPeriod).getFullYear();\n\n      const reading = this.readings.find((r) => {\n        const readingDate = new Date(r.readingDate);\n        return (\n          r.consumerId._id === consumer._id &&\n          readingDate.getMonth() === currentMonth &&\n          readingDate.getFullYear() === currentYear\n        );\n      });\n\n      if (reading) {\n        this.newReading = {\n          _id: reading._id,\n          consumerId: reading.consumerId._id,\n          currentReading: reading.currentReading,\n          consumption: reading.consumption,\n          remarks: reading.remarks || \"\",\n          readingDate: reading.readingDate,\n        };\n      }\n\n      this.$nextTick(() => {\n        if (this.$refs.form) {\n          this.$refs.form.resetValidation();\n        }\n      });\n    },\n\n    clearSelectedConsumer() {\n      this.selectedConsumer = null;\n      this.newReading = {\n        currentReading: null,\n        consumption: 0,\n        remarks: \"\",\n      };\n      this.search = \"\";\n      this.isEditing = false;\n      this.originalReading = null;\n    },\n\n    calculateConsumption() {\n      if (this.newReading.currentReading && this.selectedConsumer) {\n        this.newReading.consumption =\n          this.newReading.currentReading - this.getPreviousReading;\n      }\n    },\n\n    getStatusColor(status) {\n      return (\n        {\n          active: \"success\",\n          inactive: \"grey\",\n          delinquent: \"error\",\n        }[status] || \"grey\"\n      );\n    },\n\n    async saveReading() {\n      if (!this.$refs.form.validate()) return;\n\n      this.saving = true;\n      try {\n        const currentDay = new Date().getDate();\n\n        const billingDate = new Date(this.selectedBillingPeriod);\n        const readingDate = new Date(\n          billingDate.getFullYear(),\n          billingDate.getMonth(),\n          currentDay\n        );\n\n        const readingData = {\n          ...this.newReading,\n          previousReading: this.getPreviousReading,\n          readingDate: readingDate.toISOString(),\n          status: \"completed\",\n          consumerId: this.selectedConsumer._id,\n        };\n\n        if (this.isEditing) {\n          await this.updateReading({\n            id: this.newReading._id,\n            readingData,\n          });\n          this.showSnackbar(\"Reading updated successfully\", \"success\");\n        } else {\n          await this.createReading(readingData);\n          this.showSnackbar(\"Reading saved successfully\", \"success\");\n        }\n\n        this.clearSelectedConsumer();\n        await this.fetchReadings();\n      } catch (error) {\n        this.showSnackbar(\n          error.message ||\n            `Error ${this.isEditing ? \"updating\" : \"saving\"} reading`,\n          \"error\"\n        );\n      } finally {\n        this.saving = false;\n      }\n    },\n\n    showSnackbar(text, color) {\n      this.snackbarText = text;\n      this.snackbarColor = color;\n      this.snackbar = true;\n    },\n\n    formatDate(date) {\n      if (!date) return \"No previous reading\";\n      return new Date(date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n  },\n\n  async created() {\n    this.generateBillingPeriods();\n    try {\n      await Promise.all([this.fetchConsumers(), this.fetchReadings()]);\n    } catch (error) {\n      this.showSnackbar(\"Error loading data\", \"error\");\n    }\n  },\n\n  watch: {\n    selectedBillingPeriod: {\n      handler() {\n        this.fetchReadings();\n      },\n    },\n  },\n};\n</script>\n\n<style scoped>\n.stat-box {\n  padding: 8px;\n}\n\n.reading-list-item {\n  border-bottom: 1px solid #f5f5f5;\n}\n\n.reading-list-item:last-child {\n  border-bottom: none;\n}\n\n.billing-period-select {\n  max-width: 200px;\n}\n\n@media (max-width: 600px) {\n  .container {\n    padding: 12px !important;\n  }\n\n  .v-card {\n    border-radius: 8px;\n  }\n\n  .stat-box {\n    padding: 12px 4px;\n  }\n\n  .text-h5 {\n    font-size: 1.25rem !important;\n  }\n\n  .text-h6 {\n    font-size: 1.15rem !important;\n  }\n}\n\n@media (min-width: 601px) {\n  .container {\n    max-width: 1200px;\n  }\n}\n\n.reading-form-section {\n  background-color: #f8f9fa;\n  border-radius: 4px;\n  padding: 16px;\n}\n\n.consumption-display {\n  transition: all 0.3s ease;\n}\n\n.consumption-display:hover {\n  transform: scale(1.02);\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Readings.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Readings.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Readings.vue?vue&type=template&id=cf300a3e&scoped=true\"\nimport script from \"./Readings.vue?vue&type=script&lang=js\"\nexport * from \"./Readings.vue?vue&type=script&lang=js\"\nimport style0 from \"./Readings.vue?vue&type=style&index=0&id=cf300a3e&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cf300a3e\",\n  null\n  \n)\n\nexport default component.exports","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\nimport { getSlot } from '../../util/helpers'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  provide (): object {\n    return { form: this }\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    lazyValidation: Boolean,\n    readonly: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, getSlot(this))\n  },\n})\n","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","// Styles\nimport './VSnackbar.sass'\n\n// Components\nimport VSheet from '../VSheet/VSheet'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\nimport Toggleable from '../../mixins/toggleable'\nimport { factory as PositionableFactory } from '../../mixins/positionable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { convertToUnit, getSlot } from '../../util/helpers'\nimport { deprecate, removed } from '../../util/console'\n\n// Types\nimport { PropType, VNode } from 'vue'\n\nexport default mixins(\n  VSheet,\n  Colorable,\n  Toggleable,\n  PositionableFactory([\n    'absolute',\n    'bottom',\n    'left',\n    'right',\n    'top',\n  ])\n/* @vue/component */\n).extend({\n  name: 'v-snackbar',\n\n  props: {\n    app: Boolean,\n    centered: Boolean,\n    contentClass: {\n      type: String,\n      default: '',\n    },\n    multiLine: Boolean,\n    text: Boolean,\n    timeout: {\n      type: [Number, String],\n      default: 5000,\n    },\n    transition: {\n      type: [Boolean, String] as PropType<false | string>,\n      default: 'v-snack-transition',\n      validator: v => typeof v === 'string' || v === false,\n    },\n    vertical: Boolean,\n  },\n\n  data: () => ({\n    activeTimeout: -1,\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-snack--absolute': this.absolute,\n        'v-snack--active': this.isActive,\n        'v-snack--bottom': this.bottom || !this.top,\n        'v-snack--centered': this.centered,\n        'v-snack--has-background': this.hasBackground,\n        'v-snack--left': this.left,\n        'v-snack--multi-line': this.multiLine && !this.vertical,\n        'v-snack--right': this.right,\n        'v-snack--text': this.text,\n        'v-snack--top': this.top,\n        'v-snack--vertical': this.vertical,\n      }\n    },\n    // Text and outlined styles both\n    // use transparent backgrounds\n    hasBackground (): boolean {\n      return (\n        !this.text &&\n        !this.outlined\n      )\n    },\n    // Snackbar is dark by default\n    // override themeable logic.\n    isDark (): boolean {\n      return this.hasBackground\n        ? !this.light\n        : Themeable.options.computed.isDark.call(this)\n    },\n    styles (): object {\n      if (this.absolute || !this.app) return {}\n\n      const {\n        bar,\n        bottom,\n        footer,\n        insetFooter,\n        left,\n        right,\n        top,\n      } = this.$vuetify.application\n\n      return {\n        paddingBottom: convertToUnit(bottom + footer + insetFooter),\n        paddingLeft: convertToUnit(left),\n        paddingRight: convertToUnit(right),\n        paddingTop: convertToUnit(bar + top),\n      }\n    },\n  },\n\n  watch: {\n    isActive: 'setTimeout',\n    timeout: 'setTimeout',\n  },\n\n  mounted () {\n    if (this.isActive) this.setTimeout()\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('auto-height')) {\n      removed('auto-height', this)\n    }\n\n    /* istanbul ignore next */\n    // eslint-disable-next-line eqeqeq\n    if (this.timeout == 0) {\n      deprecate('timeout=\"0\"', '-1', this)\n    }\n  },\n\n  methods: {\n    genActions () {\n      return this.$createElement('div', {\n        staticClass: 'v-snack__action ',\n      }, [\n        getSlot(this, 'action', {\n          attrs: { class: 'v-snack__btn' },\n        }),\n      ])\n    },\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-snack__content',\n        class: {\n          [this.contentClass]: true,\n        },\n        attrs: {\n          role: 'status',\n          'aria-live': 'polite',\n        },\n      }, [getSlot(this)])\n    },\n    genWrapper () {\n      const setColor = this.hasBackground\n        ? this.setBackgroundColor\n        : this.setTextColor\n\n      const data = setColor(this.color, {\n        staticClass: 'v-snack__wrapper',\n        class: VSheet.options.computed.classes.call(this),\n        style: VSheet.options.computed.styles.call(this),\n        directives: [{\n          name: 'show',\n          value: this.isActive,\n        }],\n        on: {\n          pointerenter: () => window.clearTimeout(this.activeTimeout),\n          pointerleave: this.setTimeout,\n        },\n      })\n\n      return this.$createElement('div', data, [\n        this.genContent(),\n        this.genActions(),\n      ])\n    },\n    genTransition () {\n      return this.$createElement('transition', {\n        props: { name: this.transition },\n      }, [this.genWrapper()])\n    },\n    setTimeout () {\n      window.clearTimeout(this.activeTimeout)\n\n      const timeout = Number(this.timeout)\n\n      if (\n        !this.isActive ||\n        // TODO: remove 0 in v3\n        [0, -1].includes(timeout)\n      ) {\n        return\n      }\n\n      this.activeTimeout = window.setTimeout(() => {\n        this.isActive = false\n      }, timeout)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-snack',\n      class: this.classes,\n      style: this.styles,\n    }, [\n      this.transition !== false\n        ? this.genTransition()\n        : this.genWrapper(),\n    ])\n  },\n})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n"],"names":["_e","staticClass","_c","attrs","_vm","model","callback","_s","_v","on","$event","scopedSlots","fn","proxy","value","expression","ref","valid","currentReadingRules","isReadOnly","newReading","currentReading","$set","remarks","$$v","clearSelectedConsumer","saving","saveReading","key","consumer","readingStatus","stopPropagation","snackbar","staticRenderFns","render","name","data","breadcrumbs","text","disabled","href","billingPeriods","selectedBillingPeriod","search","selectedConsumer","snackbarText","snackbarColor","isEditing","originalReading","_id","consumerId","consumption","readingDate","Date","toISOString","substr","computed","mapState","userRole","$store","state","auth","user","role","selectedPeriod","consumerReadings","readings","filter","r","sort","a","b","length","selectedPeriodReading","find","reading","getFullYear","getMonth","hasNewerReading","some","v","prevReading","getPreviousReading","getTotalConsumers","consumers","getPendingReadings","currentMonth","currentYear","endOfMonth","map","getTime","getPendingConsumers","hasReadingThisMonth","getPendingReadingsCount","c","getCompletedReadings","billingDate","previousReading","getLastReadingDate","methods","mapActions","generateBillingPeriods","periods","currentDate","months","forEach","month","index","push","getReadingStatusColor","status","completed","pending","searchConsumer","found","accountNo","selectConsumer","showSnackbar","hasExistingReading","editReading","console","log","$nextTick","$refs","form","resetValidation","viewReading","calculateConsumption","getStatusColor","active","inactive","delinquent","validate","currentDay","getDate","readingData","updateReading","id","createReading","fetchReadings","error","message","color","formatDate","date","toLocaleDateString","year","day","created","Promise","all","fetchConsumers","watch","handler","component","mixins","BindsAttrs","RegistrableProvide","extend","provide","this","inheritAttrs","props","Boolean","lazyValidation","readonly","inputs","watchers","errorBag","val","errors","Object","values","includes","$emit","deep","immediate","watchInput","input","watcher","$watch","_uid","shouldValidate","hasOwnProperty","reset","resetErrorBag","setTimeout","register","unregister","i","unwatch","$delete","h","novalidate","attrs$","submit","e","getSlot","createSimpleFunctional","VSheet","Colorable","Toggleable","PositionableFactory","app","centered","contentClass","type","String","default","multiLine","timeout","Number","transition","validator","vertical","activeTimeout","classes","absolute","isActive","bottom","top","hasBackground","left","right","outlined","isDark","light","Themeable","options","call","styles","bar","footer","insetFooter","$vuetify","application","paddingBottom","convertToUnit","paddingLeft","paddingRight","paddingTop","mounted","$attrs","removed","deprecate","genActions","$createElement","class","genContent","genWrapper","setColor","setBackgroundColor","setTextColor","style","directives","pointerenter","window","clearTimeout","pointerleave","genTransition","baseMixins","VTextField","autoGrow","noResize","rowHeight","isNaN","parseFloat","rows","parseInt","noResizeHandle","calculateInputHeight","_a","removeProperty","lazyValue","height","scrollHeight","minHeight","Math","max","genInput","tag","onInput","onKeyDown","isFocused","keyCode"],"sourceRoot":""}