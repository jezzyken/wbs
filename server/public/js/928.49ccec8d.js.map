{"version":3,"file":"js/928.49ccec8d.js","mappings":"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","sources":["webpack://client/./src/views/admin/Users.vue","webpack://client/src/views/admin/Users.vue","webpack://client/./src/views/admin/Users.vue?162b","webpack://client/./src/views/admin/Users.vue?b9af"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{staticClass:\"px-6\"},[_c('div',{staticClass:\"mb-6\"},[_c('v-breadcrumbs',{staticClass:\"pa-0\",attrs:{\"items\":_vm.breadcrumbs,\"divider\":\"/\"}})],1),_c('v-card',{staticClass:\"mb-6\"},[_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('v-text-field',{attrs:{\"label\":\"Search\",\"placeholder\":\"Username / Name / Email\",\"dense\":\"\",\"outlined\":\"\",\"hide-details\":\"\",\"prepend-inner-icon\":\"mdi-magnify\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.fetchUsers.apply(null, arguments)}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)],1)],1)],1),_c('v-card',[_c('v-card-title',{staticClass:\"d-flex justify-space-between py-4\"},[_c('span',{staticClass:\"text-h6\"},[_vm._v(\"User List\")]),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.openAddDialog}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-plus\")]),_vm._v(\" Add User \")],1)],1),_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.filteredUsers,\"loading\":_vm.loading,\"items-per-page\":10,\"footer-props\":{\n        'items-per-page-options': [10, 20, 50],\n        'show-first-last-page': true,\n      }},scopedSlots:_vm._u([{key:\"item.role\",fn:function({ item }){return [_c('v-chip',{attrs:{\"color\":_vm.getRoleColor(item.role),\"small\":\"\",\"label\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.formatRole(item.role))+\" \")])]}},{key:\"item.status\",fn:function({ item }){return [_c('v-chip',{attrs:{\"color\":_vm.getStatusColor(item.status),\"small\":\"\",\"label\":\"\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(item.status)+\" \")])]}},{key:\"item.actions\",fn:function({ item }){return [_c('v-btn',{staticClass:\"mr-2\",attrs:{\"x-small\":\"\",\"text\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){return _vm.editUser(item)}}},[_c('v-icon',{attrs:{\"x-small\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-pencil\")]),_vm._v(\" Edit \")],1),_c('v-btn',{attrs:{\"x-small\":\"\",\"text\":\"\",\"color\":item.isArchived ? 'success' : 'error'},on:{\"click\":function($event){return _vm.confirmArchive(item)}}},[_c('v-icon',{attrs:{\"x-small\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-archive\")]),_vm._v(\" Archive \")],1)]}}])})],1),_c('v-dialog',{attrs:{\"max-width\":\"600px\",\"persistent\":\"\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"text-h5\"},[_vm._v(_vm._s(_vm.isEdit ? \"Edit User\" : \"Add User\"))])]),_c('v-card-text',[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Username\",\"required\":\"\",\"disabled\":_vm.isEdit,\"rules\":_vm.usernameRules},model:{value:(_vm.editedItem.username),callback:function ($$v) {_vm.$set(_vm.editedItem, \"username\", $$v)},expression:\"editedItem.username\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.roles,\"label\":\"Role\",\"required\":\"\",\"rules\":[(v) => !!v || 'Role is required']},model:{value:(_vm.editedItem.role),callback:function ($$v) {_vm.$set(_vm.editedItem, \"role\", $$v)},expression:\"editedItem.role\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"First Name\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.editedItem.firstName),callback:function ($$v) {_vm.$set(_vm.editedItem, \"firstName\", $$v)},expression:\"editedItem.firstName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Last Name\",\"required\":\"\",\"rules\":_vm.nameRules},model:{value:(_vm.editedItem.lastName),callback:function ($$v) {_vm.$set(_vm.editedItem, \"lastName\", $$v)},expression:\"editedItem.lastName\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Email\",\"required\":\"\",\"rules\":_vm.emailRules},model:{value:(_vm.editedItem.email),callback:function ($$v) {_vm.$set(_vm.editedItem, \"email\", $$v)},expression:\"editedItem.email\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-text-field',{attrs:{\"label\":\"Contact Number\",\"rules\":_vm.phoneRules},model:{value:(_vm.editedItem.contactNumber),callback:function ($$v) {_vm.$set(_vm.editedItem, \"contactNumber\", $$v)},expression:\"editedItem.contactNumber\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\"}},[_c('v-select',{attrs:{\"items\":_vm.statusItems,\"label\":\"Status\",\"required\":\"\",\"rules\":[(v) => !!v || 'Status is required']},model:{value:(_vm.editedItem.status),callback:function ($$v) {_vm.$set(_vm.editedItem, \"status\", $$v)},expression:\"editedItem.status\"}})],1),(!_vm.isEdit)?_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"label\":\"Password\",\"type\":\"password\",\"required\":\"\",\"rules\":_vm.passwordRules},model:{value:(_vm.editedItem.password),callback:function ($$v) {_vm.$set(_vm.editedItem, \"password\", $$v)},expression:\"editedItem.password\"}})],1):_vm._e()],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\",\"disabled\":_vm.isSaving},on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"disabled\":!_vm.valid || _vm.isSaving,\"loading\":_vm.isSaving},on:{\"click\":_vm.saveUser}},[_vm._v(\" Save \")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"400px\"},model:{value:(_vm.archiveDialog),callback:function ($$v) {_vm.archiveDialog=$$v},expression:\"archiveDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"text-h5\"},[_vm._v(\"Archive User\")]),_c('v-card-text',[_vm._v(\" Are you sure you want to archive this user? \"),_c('v-text-field',{staticClass:\"mt-4\",attrs:{\"label\":\"Reason for archiving\",\"required\":\"\"},model:{value:(_vm.archiveReason),callback:function ($$v) {_vm.archiveReason=$$v},expression:\"archiveReason\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.archiveDialog = false}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"error\",\"disabled\":!_vm.archiveReason},on:{\"click\":_vm.handleArchive}},[_vm._v(\" Archive \")])],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":\"3000\"},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\"Close\")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container class=\"px-6\">\n    <!-- Page Header -->\n    <div class=\"mb-6\">\n      <v-breadcrumbs\n        :items=\"breadcrumbs\"\n        divider=\"/\"\n        class=\"pa-0\"\n      ></v-breadcrumbs>\n    </div>\n\n    <!-- Search Section -->\n    <v-card class=\"mb-6\">\n      <v-card-text>\n        <v-row>\n          <v-col cols=\"12\" sm=\"6\" md=\"4\">\n            <v-text-field\n              v-model=\"search\"\n              label=\"Search\"\n              placeholder=\"Username / Name / Email\"\n              dense\n              outlined\n              hide-details\n              prepend-inner-icon=\"mdi-magnify\"\n              @keyup.enter=\"fetchUsers\"\n            ></v-text-field>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n\n    <!-- Users List -->\n    <v-card>\n      <v-card-title class=\"d-flex justify-space-between py-4\">\n        <span class=\"text-h6\">User List</span>\n        <v-btn color=\"primary\" @click=\"openAddDialog\">\n          <v-icon left>mdi-plus</v-icon>\n          Add User\n        </v-btn>\n      </v-card-title>\n\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"filteredUsers\"\n        :loading=\"loading\"\n        :items-per-page=\"10\"\n        :footer-props=\"{\n          'items-per-page-options': [10, 20, 50],\n          'show-first-last-page': true,\n        }\"\n      >\n        <template v-slot:item.role=\"{ item }\">\n          <v-chip :color=\"getRoleColor(item.role)\" small label>\n            {{ formatRole(item.role) }}\n          </v-chip>\n        </template>\n\n        <template v-slot:item.status=\"{ item }\">\n          <v-chip\n            :color=\"getStatusColor(item.status)\"\n            small\n            label\n            text-color=\"white\"\n          >\n            {{ item.status }}\n          </v-chip>\n        </template>\n\n        <template v-slot:item.actions=\"{ item }\">\n          <v-btn\n            x-small\n            text\n            color=\"primary\"\n            class=\"mr-2\"\n            @click=\"editUser(item)\"\n          >\n            <v-icon x-small left>mdi-pencil</v-icon>\n            Edit\n          </v-btn>\n          <v-btn\n            x-small\n            text\n            :color=\"item.isArchived ? 'success' : 'error'\"\n            @click=\"confirmArchive(item)\"\n          >\n            <v-icon x-small left>mdi-archive</v-icon>\n            Archive\n          </v-btn>\n        </template>\n      </v-data-table>\n    </v-card>\n\n    <!-- Add/Edit User Dialog -->\n    <v-dialog v-model=\"dialog\" max-width=\"600px\" persistent>\n      <v-card>\n        <v-card-title>\n          <span class=\"text-h5\">{{ isEdit ? \"Edit User\" : \"Add User\" }}</span>\n        </v-card-title>\n        <v-card-text>\n          <v-form ref=\"form\" v-model=\"valid\">\n            <v-row>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.username\"\n                  label=\"Username\"\n                  required\n                  :disabled=\"isEdit\"\n                  :rules=\"usernameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-select\n                  v-model=\"editedItem.role\"\n                  :items=\"roles\"\n                  label=\"Role\"\n                  required\n                  :rules=\"[(v) => !!v || 'Role is required']\"\n                ></v-select>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.firstName\"\n                  label=\"First Name\"\n                  required\n                  :rules=\"nameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.lastName\"\n                  label=\"Last Name\"\n                  required\n                  :rules=\"nameRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.email\"\n                  label=\"Email\"\n                  required\n                  :rules=\"emailRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-text-field\n                  v-model=\"editedItem.contactNumber\"\n                  label=\"Contact Number\"\n                  :rules=\"phoneRules\"\n                ></v-text-field>\n              </v-col>\n              <v-col cols=\"12\" sm=\"6\">\n                <v-select\n                  v-model=\"editedItem.status\"\n                  :items=\"statusItems\"\n                  label=\"Status\"\n                  required\n                  :rules=\"[(v) => !!v || 'Status is required']\"\n                ></v-select>\n              </v-col>\n              <v-col cols=\"12\" v-if=\"!isEdit\">\n                <v-text-field\n                  v-model=\"editedItem.password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  required\n                  :rules=\"passwordRules\"\n                ></v-text-field>\n              </v-col>\n            </v-row>\n          </v-form>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"closeDialog\" :disabled=\"isSaving\">Cancel</v-btn>\n          <v-btn\n            color=\"primary\"\n            :disabled=\"!valid || isSaving\"\n            :loading=\"isSaving\"\n            @click=\"saveUser\"\n          >\n            Save\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Archive Confirmation Dialog -->\n    <v-dialog v-model=\"archiveDialog\" max-width=\"400px\">\n      <v-card>\n        <v-card-title class=\"text-h5\">Archive User</v-card-title>\n        <v-card-text>\n          Are you sure you want to archive this user?\n          <v-text-field\n            v-model=\"archiveReason\"\n            label=\"Reason for archiving\"\n            required\n            class=\"mt-4\"\n          ></v-text-field>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn text @click=\"archiveDialog = false\">Cancel</v-btn>\n          <v-btn\n            color=\"error\"\n            :disabled=\"!archiveReason\"\n            @click=\"handleArchive\"\n          >\n            Archive\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!-- Snackbar -->\n    <v-snackbar v-model=\"snackbar\" :color=\"snackbarColor\" timeout=\"3000\">\n      {{ snackbarText }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn text v-bind=\"attrs\" @click=\"snackbar = false\">Close</v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { mapState, mapActions } from \"vuex\";\n\nexport default {\n  name: \"UsersPage\",\n\n  data: () => ({\n    breadcrumbs: [\n      { text: \"Home\", disabled: false, href: \"/\" },\n      { text: \"Users\", disabled: true },\n    ],\n    search: \"\",\n    dialog: false,\n    archiveDialog: false,\n    archiveReason: \"\",\n    userToArchive: null,\n    valid: false,\n    isEdit: false,\n    snackbar: false,\n    snackbarText: \"\",\n    snackbarColor: \"\",\n    isSaving: false,\n\n    headers: [\n      { text: \"Username\", value: \"username\", sortable: true },\n      { text: \"Name\", value: \"fullName\", sortable: true },\n      { text: \"Role\", value: \"role\", sortable: true },\n      { text: \"Email\", value: \"email\", sortable: true },\n      { text: \"Contact\", value: \"contactNumber\", sortable: true },\n      { text: \"Status\", value: \"status\", sortable: true },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n\n    roles: [\"admin\", \"meter_reader\", \"collection_officer\"],\n\n    statusItems: [\"active\", \"inactive\"],\n\n    editedItem: {\n      username: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      role: \"\",\n      email: \"\",\n      contactNumber: \"\",\n      status: \"active\",\n    },\n\n    defaultItem: {\n      username: \"\",\n      password: \"\",\n      firstName: \"\",\n      lastName: \"\",\n      role: \"\",\n      email: \"\",\n      contactNumber: \"\",\n      status: \"active\",\n    },\n\n    usernameRules: [\n      (v) =>\n        (v !== null && v !== undefined && v.length > 0) ||\n        \"Username is required\",\n      (v) =>\n        (v !== null && v !== undefined && v.length >= 3) ||\n        \"Username must be at least 3 characters\",\n    ],\n\n    nameRules: [\n      (v) =>\n        (v !== null && v !== undefined && v.length > 0) || \"Name is required\",\n      (v) =>\n        (v !== null && v !== undefined && v.length >= 2) ||\n        \"Name must be at least 2 characters\",\n    ],\n\n    emailRules: [\n      (v) =>\n        (v !== null && v !== undefined && v.length > 0) || \"Email is required\",\n      (v) =>\n        v === null ||\n        v === undefined ||\n        /.+@.+\\..+/.test(v) ||\n        \"Invalid email format\",\n    ],\n\n    phoneRules: [\n      (v) => !v || /^\\+?[\\d\\s-]{10,}$/.test(v) || \"Invalid phone number format\",\n    ],\n  }),\n\n  computed: {\n    ...mapState(\"users\", [\"users\", \"loading\", \"error\"]),\n\n    passwordRules() {\n      return [\n        (v) => !this.isEdit || !!v || \"Password is required\",\n        (v) =>\n          !this.isEdit ||\n          v.length >= 8 ||\n          \"Password must be at least 8 characters\",\n      ];\n    },\n\n    filteredUsers() {\n      return this.users\n        .filter((user) => {\n          const searchLower = this.search.toLowerCase();\n          return (\n            !this.search ||\n            user.username.toLowerCase().includes(searchLower) ||\n            user.firstName.toLowerCase().includes(searchLower) ||\n            user.lastName.toLowerCase().includes(searchLower) ||\n            user.email.toLowerCase().includes(searchLower)\n          );\n        })\n        .map((user) => ({\n          ...user,\n          fullName: `${user.firstName} ${user.lastName}`,\n        }));\n    },\n  },\n\n  async created() {\n    await this.fetchUsers();\n  },\n\n  methods: {\n    ...mapActions(\"users\", [\n      \"fetchUsers\",\n      \"createUser\",\n      \"updateUser\",\n      \"archiveUser\",\n    ]),\n\n    formatRole(role) {\n      return role\n        .split(\"_\")\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(\" \");\n    },\n\n    getRoleColor(role) {\n      return (\n        {\n          admin: \"red\",\n          meter_reader: \"blue\",\n          collection_officer: \"green\",\n        }[role] || \"grey\"\n      );\n    },\n\n    getStatusColor(status) {\n      return (\n        {\n          active: \"success\",\n          inactive: \"error\",\n        }[status] || \"grey\"\n      );\n    },\n\n    openAddDialog() {\n      this.isEdit = false;\n      this.editedItem = { ...this.defaultItem };\n      this.dialog = true;\n    },\n    editUser(item) {\n      this.isEdit = true;\n      this.editedItem = { ...item };\n      delete this.editedItem.password;\n      this.dialog = true;\n    },\n\n    closeDialog() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        if (this.$refs.form) {\n          this.$refs.form.reset();\n          this.editedItem = { ...this.defaultItem };\n        }\n      });\n    },\n\n    confirmArchive(item) {\n      this.userToArchive = item;\n      this.archiveReason = \"\";\n      this.archiveDialog = true;\n    },\n\n    async handleArchive() {\n      if (!this.archiveReason) return;\n\n      try {\n        await this.archiveUser({\n          id: this.userToArchive._id,\n          reason: this.archiveReason,\n        });\n        this.snackbarText = \"User archived successfully\";\n        this.snackbarColor = \"success\";\n        this.archiveDialog = false;\n        await this.fetchUsers();\n      } catch (error) {\n        this.snackbarText = error.message || \"Error archiving user\";\n        this.snackbarColor = \"error\";\n      } finally {\n        this.snackbar = true;\n      }\n    },\n\n    async saveUser() {\n      if (this.$refs.form.validate()) {\n        this.isSaving = true;\n        try {\n          const userData = { ...this.editedItem };\n\n          if (this.isEdit) {\n            // Remove unnecessary fields for update\n            delete userData._id;\n            delete userData.fullName;\n            delete userData.createdAt;\n            delete userData.updatedAt;\n\n            await this.updateUser({\n              id: this.editedItem._id,\n              userData,\n            });\n            this.snackbarText = \"User updated successfully\";\n          } else {\n            await this.createUser(userData);\n            this.snackbarText = \"User created successfully\";\n          }\n\n          this.snackbarColor = \"success\";\n          this.closeDialog();\n          await this.fetchUsers();\n        } catch (error) {\n          this.snackbarText = error.message || \"Error saving user\";\n          this.snackbarColor = \"error\";\n        } finally {\n          this.isSaving = false;\n          this.snackbar = true;\n        }\n      }\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      if (!val) {\n        this.closeDialog();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.v-data-table ::v-deep th {\n  font-weight: 600 !important;\n}\n\n.v-data-table ::v-deep td {\n  font-size: 14px !important;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=ba4269ea&scoped=true\"\nimport script from \"./Users.vue?vue&type=script&lang=js\"\nexport * from \"./Users.vue?vue&type=script&lang=js\"\nimport style0 from \"./Users.vue?vue&type=style&index=0&id=ba4269ea&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ba4269ea\",\n  null\n  \n)\n\nexport default component.exports"],"names":["$event","type","_vm","model","value","callback","expression","staticClass","_c","openAddDialog","attrs","loading","key","fn","item","_v","dialog","$$v","valid","usernameRules","editedItem","$set","role","statusItems","status","isEdit","on","saveUser","archiveDialog","handleArchive","snackbarColor","snackbarText","staticRenderFns","name","data","breadcrumbs","text","disabled","href","search","archiveReason","userToArchive","snackbar","isSaving","headers","sortable","roles","username","password","firstName","lastName","email","contactNumber","defaultItem","v","undefined","length","nameRules","emailRules","test","phoneRules","computed","mapState","passwordRules","filteredUsers","users","filter","user","searchLower","toLowerCase","includes","map","fullName","created","fetchUsers","methods","mapActions","formatRole","split","word","charAt","toUpperCase","slice","join","getRoleColor","admin","meter_reader","collection_officer","getStatusColor","active","inactive","editUser","closeDialog","$nextTick","$refs","form","reset","confirmArchive","archiveUser","id","_id","reason","error","message","validate","userData","createdAt","updatedAt","updateUser","createUser","watch","val","component","render"],"sourceRoot":""}